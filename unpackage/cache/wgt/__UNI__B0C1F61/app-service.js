if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";const a=(e,t)=>{const a=e.__vccOpts||e;for(const[i,l]of t)a[i]=l;return a};const i=a({name:"u-icon",emits:["click","touchstart"],props:{name:{type:String,default:""},color:{type:String,default:""},size:{type:[Number,String],default:"inherit"},bold:{type:Boolean,default:!1},index:{type:[Number,String],default:""},hoverClass:{type:String,default:""},customPrefix:{type:String,default:"uicon"},label:{type:[String,Number],default:""},labelPos:{type:String,default:"right"},labelSize:{type:[String,Number],default:"28"},labelColor:{type:String,default:"#606266"},marginLeft:{type:[String,Number],default:"6"},marginTop:{type:[String,Number],default:"6"},marginRight:{type:[String,Number],default:"6"},marginBottom:{type:[String,Number],default:"6"},imgMode:{type:String,default:"widthFix"},customStyle:{type:Object,default:()=>({})},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},top:{type:[String,Number],default:0},showDecimalIcon:{type:Boolean,default:!1},inactiveColor:{type:String,default:"#ececec"},percent:{type:[Number,String],default:"50"}},computed:{customClass(){let e=[],{customPrefix:t,name:a}=this,i=a.indexOf("-icon-");return i>-1?(t=a.substring(0,i+5),e.push(a)):e.push(`${t}-${a}`),"uicon"===t?e.push("u-iconfont"):e.push(t),this.showDecimalIcon&&this.inactiveColor&&this.$u.config.type.includes(this.inactiveColor)?e.push("u-icon__icon--"+this.inactiveColor):this.color&&this.$u.config.type.includes(this.color)&&e.push("u-icon__icon--"+this.color),e},iconStyle(){let e={};return e={fontSize:"inherit"==this.size?"inherit":this.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:this.$u.addUnit(this.top)},this.showDecimalIcon&&this.inactiveColor&&!this.$u.config.type.includes(this.inactiveColor)?e.color=this.inactiveColor:this.color&&!this.$u.config.type.includes(this.color)&&(e.color=this.color),e},isImg(){return-1!==this.name.indexOf("/")},imgStyle(){let e={};return e.width=this.width?this.$u.addUnit(this.width):this.$u.addUnit(this.size),e.height=this.height?this.$u.addUnit(this.height):this.$u.addUnit(this.size),e},decimalIconStyle(){let e={};return e={fontSize:"inherit"==this.size?"inherit":this.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:this.$u.addUnit(this.top),width:this.percent+"%"},this.color&&!this.$u.config.type.includes(this.color)&&(e.color=this.color),e},decimalIconClass(){let e=[];return e.push(this.customPrefix+"-"+this.name),"uicon"==this.customPrefix?e.push("u-iconfont"):e.push(this.customPrefix),this.color&&this.$u.config.type.includes(this.color)?e.push("u-icon__icon--"+this.color):e.push("u-icon__icon--primary"),e}},methods:{click(){this.$emit("click",this.index)},touchstart(){this.$emit("touchstart",this.index)}}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle([i.customStyle]),class:e.normalizeClass(["u-icon",["u-icon--"+i.labelPos]]),onClick:a[1]||(a[1]=(...e)=>s.click&&s.click(...e))},[s.isImg?(e.openBlock(),e.createElementBlock("image",{key:0,class:"u-icon__img",src:i.name,mode:i.imgMode,style:e.normalizeStyle([s.imgStyle])},null,12,["src","mode"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["u-icon__icon",s.customClass]),style:e.normalizeStyle([s.iconStyle]),"hover-class":i.hoverClass,onTouchstart:a[0]||(a[0]=(...e)=>s.touchstart&&s.touchstart(...e))},[i.showDecimalIcon?(e.openBlock(),e.createElementBlock("text",{key:0,style:e.normalizeStyle([s.decimalIconStyle]),class:e.normalizeClass([s.decimalIconClass,"u-icon__decimal"]),"hover-class":i.hoverClass},null,14,["hover-class"])):e.createCommentVNode("",!0)],46,["hover-class"])),""!==i.label&&null!==i.label?(e.openBlock(),e.createElementBlock("text",{key:2,class:"u-icon__label",style:e.normalizeStyle({color:i.labelColor,fontSize:t.$u.addUnit(i.labelSize),marginLeft:"right"==i.labelPos?t.$u.addUnit(i.marginLeft):0,marginTop:"bottom"==i.labelPos?t.$u.addUnit(i.marginTop):0,marginRight:"left"==i.labelPos?t.$u.addUnit(i.marginRight):0,marginBottom:"top"==i.labelPos?t.$u.addUnit(i.marginBottom):0})},e.toDisplayString(i.label),5)):e.createCommentVNode("",!0)],6)}],["__scopeId","data-v-a256bf07"]]);function l(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}function o(e,a){return t.isString(e)?a:e}function s(e,t,a){}const n={methods:{dispatch(e,t,a){let i=this.$parent||this.$root,l=i.$options.name;for(;i&&(!l||l!==e);)i=i.$parent,i&&(l=i.$options.name);i&&i[t](a)},broadcast(e,t,a){s.call(this,e,t,a)}}};const r=a({name:"u-input",emits:["update:modelValue","input","change","blur","focus","click","touchstart","confirm"],mixins:[n],props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #c0c4cc;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:()=>({})},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!1},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},clearable:{type:[Boolean,String],default:!0},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!0},backgroundColor:{type:String},padding:{type:String},showArrow:{type:Boolean,default:!0},icon:{type:String,default:""},iconColor:{type:String,default:"#676767"},iconSize:{type:String,default:"16px"}},data:()=>({defaultValue:"",inputHeight:70,textareaHeight:200,validateState:!1,focused:!1,showPassword:!1,lastValue:"",uForm:{inputAlign:"",clearable:""}}),watch:{valueCom(e,t){this.defaultValue=e,e!=t&&"select"==this.type&&this.handleInput({detail:{value:e}})}},computed:{valueCom(){return this.modelValue},inputAlignCom(){return this.inputAlign||this.uForm.inputAlign||"left"},clearableCom(){return"boolean"==typeof this.clearable?this.clearable:"boolean"!=typeof this.uForm.clearable||this.uForm.clearable},inputMaxlength(){return Number(this.maxlength)},getStyle(){let e={};return"textarea"==this.type?"auto"==this.height||(e.height=isNaN(this.height)?this.height:this.height+"rpx"):(e.minHeight=(this.height?isNaN(this.height)?this.height:this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx")+" !important",e=Object.assign(e,this.customStyle)),e},getCursorSpacing(){return Number(this.cursorSpacing)},uSelectionStart(){return String(this.selectionStart)},uSelectionEnd(){return String(this.selectionEnd)}},created(){this.defaultValue=this.valueCom},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},methods:{handleInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.defaultValue=t,setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),40)},handleBlur(e){setTimeout((()=>{this.focused=!1}),100),this.$emit("blur",e.detail.value),this.$emit("update:modelValue",e.detail.value),setTimeout((()=>{this.dispatch("u-form-item","onFieldBlur",e.detail.value)}),40)},onFormItemError(e){this.validateState=e},onFocus(e){this.focused=!0,this.$emit("focus")},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.defaultValue="",this.$nextTick((()=>{this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("change",""),this.focused=!0}))},inputClick(){this.$emit("click")}}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-icon"),i);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-input",{"u-input--border":l.border,"u-input--error":n.validateState}]),style:e.normalizeStyle({padding:l.padding?l.padding:`0 ${l.border?20:0}rpx`,borderColor:l.borderColor,textAlign:r.inputAlignCom,backgroundColor:l.backgroundColor}),onClick:a[10]||(a[10]=e.withModifiers(((...e)=>r.inputClick&&r.inputClick(...e)),["stop"]))},["textarea"==l.type?(e.openBlock(),e.createElementBlock("textarea",{key:0,"show-confirm-bar":l.showConfirmbar,class:e.normalizeClass(["u-input__input u-input__textarea",{disabled:l.disabled||"select"===l.type}]),style:e.normalizeStyle([r.getStyle]),value:n.defaultValue,placeholder:l.placeholder,placeholderStyle:l.placeholderStyle,disabled:l.disabled,maxlength:r.inputMaxlength,fixed:l.fixed,focus:l.focus,autoHeight:l.autoHeight,"selection-end":r.uSelectionEnd,"selection-start":r.uSelectionStart,"cursor-spacing":r.getCursorSpacing,onInput:a[0]||(a[0]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:a[1]||(a[1]=(...e)=>r.handleBlur&&r.handleBlur(...e)),onFocus:a[2]||(a[2]=(...e)=>r.onFocus&&r.onFocus(...e)),onConfirm:a[3]||(a[3]=(...e)=>r.onConfirm&&r.onConfirm(...e))},null,46,["show-confirm-bar","value","placeholder","placeholderStyle","disabled","maxlength","fixed","focus","autoHeight","selection-end","selection-start","cursor-spacing"])):(e.openBlock(),e.createElementBlock("input",{key:1,class:e.normalizeClass(["u-input__input",{disabled:l.disabled||"select"===l.type}]),type:"password"==l.type?"text":l.type,style:e.normalizeStyle([r.getStyle]),value:n.defaultValue,"show-confirm-bar":l.showConfirmbar,password:"password"==l.type&&!n.showPassword,placeholder:l.placeholder,placeholderStyle:l.placeholderStyle,disabled:l.disabled||"select"===l.type,maxlength:r.inputMaxlength,focus:l.focus,confirmType:l.confirmType,"cursor-spacing":r.getCursorSpacing,"selection-end":r.uSelectionEnd,"selection-start":r.uSelectionStart,onFocus:a[4]||(a[4]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:a[5]||(a[5]=(...e)=>r.handleBlur&&r.handleBlur(...e)),onInput:a[6]||(a[6]=(...e)=>r.handleInput&&r.handleInput(...e)),onConfirm:a[7]||(a[7]=(...e)=>r.onConfirm&&r.onConfirm(...e))},null,46,["type","value","show-confirm-bar","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","selection-end","selection-start"])),e.createElementVNode("view",{class:"u-input__right-icon u-flex"},[r.clearableCom&&""!=r.valueCom&&n.focused?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-input__right-icon__clear u-input__right-icon__item",onClick:a[8]||(a[8]=(...e)=>r.onClear&&r.onClear(...e))},[e.createVNode(c,{size:"32",name:"close-circle-fill",color:"#c0c4cc"})])):e.createCommentVNode("",!0),l.passwordIcon&&"password"==l.type?(e.openBlock(),e.createElementBlock("view",{key:1,class:"u-input__right-icon__clear u-input__right-icon__item"},[e.createVNode(c,{size:"32",name:n.showPassword?"eye-fill":"eye",color:"#c0c4cc",onClick:a[9]||(a[9]=e=>n.showPassword=!n.showPassword)},null,8,["name"])])):e.createCommentVNode("",!0),"select"==l.type&&l.showArrow?(e.openBlock(),e.createElementBlock("view",{key:2,class:e.normalizeClass(["u-input__right-icon--select u-input__right-icon__item",{"u-input__right-icon--select--reverse":l.selectOpen}])},[l.icon?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass(l.icon),style:e.normalizeStyle({color:l.iconColor,fontSize:l.iconSize})},null,6)):(e.openBlock(),e.createBlock(c,{key:1,name:"arrow-right",size:"26",color:"#c0c4cc"}))],2)):e.createCommentVNode("",!0)])],6)}],["__scopeId","data-v-0e465cc3"]]);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},c.apply(this,arguments)}var d=/%[sdj%]/g,u=function(){};function p(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var a=e.field;t[a]=t[a]||[],t[a].push(e)})),t}function m(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=1,l=t[0],o=t.length;if("function"==typeof l)return l.apply(null,t.slice(1));if("string"==typeof l){for(var s=String(l).replace(d,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch(a){return"[Circular]"}break;default:return e}})),n=t[i];i<o;n=t[++i])s+=" "+n;return s}return l}function h(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function g(e,t,a){var i=0,l=e.length;!function o(s){if(s&&s.length)a(s);else{var n=i;i+=1,n<l?t(e[n],o):a([])}}([])}function f(e,t,a,i){if(t.first){var l=new Promise((function(t,l){var o=function(e){var t=[];return Object.keys(e).forEach((function(a){t.push.apply(t,e[a])})),t}(e);g(o,a,(function(e){return i(e),e.length?l({errors:e,fields:p(e)}):t()}))}));return l.catch((function(e){return e})),l}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var s=Object.keys(e),n=s.length,r=0,c=[],d=new Promise((function(t,l){var d=function(e){if(c.push.apply(c,e),++r===n)return i(c),c.length?l({errors:c,fields:p(c)}):t()};s.length||(i(c),t()),s.forEach((function(t){var i=e[t];-1!==o.indexOf(t)?g(i,a,d):function(e,t,a){var i=[],l=0,o=e.length;function s(e){i.push.apply(i,e),++l===o&&a(i)}e.forEach((function(e){t(e,s)}))}(i,a,d)}))}));return d.catch((function(e){return e})),d}function y(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function w(e,t){if(t)for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];"object"==typeof i&&"object"==typeof e[a]?e[a]=c({},e[a],{},i):e[a]=i}return e}function b(e,t,a,i,l,o){!e.required||a.hasOwnProperty(e.field)&&!h(t,o||e.type)||i.push(m(l.messages.required,e.fullField))}"undefined"!=typeof process&&process.env;var v={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},x={integer:function(e){return x.number(e)&&parseInt(e,10)===e},float:function(e){return x.number(e)&&!x.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof+e},object:function(e){return"object"==typeof e&&!x.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(v.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(v.url)},hex:function(e){return"string"==typeof e&&!!e.match(v.hex)}};var k={required:b,whitespace:function(e,t,a,i,l){(/^\s+$/.test(t)||""===t)&&i.push(m(l.messages.whitespace,e.fullField))},type:function(e,t,a,i,l){if(e.required&&void 0===t)b(e,t,a,i,l);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?x[o](t)||i.push(m(l.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&i.push(m(l.messages.types[o],e.fullField,e.type))}},range:function(e,t,a,i,l){var o="number"==typeof e.len,s="number"==typeof e.min,n="number"==typeof e.max,r=t,c=null,d="number"==typeof t,u="string"==typeof t,p=Array.isArray(t);if(d?c="number":u?c="string":p&&(c="array"),!c)return!1;p&&(r=t.length),u&&(r=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?r!==e.len&&i.push(m(l.messages[c].len,e.fullField,e.len)):s&&!n&&r<e.min?i.push(m(l.messages[c].min,e.fullField,e.min)):n&&!s&&r>e.max?i.push(m(l.messages[c].max,e.fullField,e.max)):s&&n&&(r<e.min||r>e.max)&&i.push(m(l.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,a,i,l){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&i.push(m(l.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,a,i,l){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(m(l.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||i.push(m(l.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function S(e,t,a,i,l){var o=e.type,s=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t,o)&&!e.required)return a();k.required(e,t,i,s,l,o),h(t,o)||k.type(e,t,i,s,l)}a(s)}var _={string:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t,"string")&&!e.required)return a();k.required(e,t,i,o,l,"string"),h(t,"string")||(k.type(e,t,i,o,l),k.range(e,t,i,o,l),k.pattern(e,t,i,o,l),!0===e.whitespace&&k.whitespace(e,t,i,o,l))}a(o)},method:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&k.type(e,t,i,o,l)}a(o)},number:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(""===t&&(t=void 0),h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&(k.type(e,t,i,o,l),k.range(e,t,i,o,l))}a(o)},boolean:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&k.type(e,t,i,o,l)}a(o)},regexp:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),h(t)||k.type(e,t,i,o,l)}a(o)},integer:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&(k.type(e,t,i,o,l),k.range(e,t,i,o,l))}a(o)},float:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&(k.type(e,t,i,o,l),k.range(e,t,i,o,l))}a(o)},array:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t,"array")&&!e.required)return a();k.required(e,t,i,o,l,"array"),h(t,"array")||(k.type(e,t,i,o,l),k.range(e,t,i,o,l))}a(o)},object:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&k.type(e,t,i,o,l)}a(o)},enum:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l),void 0!==t&&k.enum(e,t,i,o,l)}a(o)},pattern:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t,"string")&&!e.required)return a();k.required(e,t,i,o,l),h(t,"string")||k.pattern(e,t,i,o,l)}a(o)},date:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();var s;if(k.required(e,t,i,o,l),!h(t))s="number"==typeof t?new Date(t):t,k.type(e,s,i,o,l),s&&k.range(e,s.getTime(),i,o,l)}a(o)},url:S,hex:S,email:S,required:function(e,t,a,i,l){var o=[],s=Array.isArray(t)?"array":typeof t;k.required(e,t,i,o,l,s),a(o)},any:function(e,t,a,i,l){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(h(t)&&!e.required)return a();k.required(e,t,i,o,l)}a(o)}};function V(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var C=V();function N(e){this.rules=null,this._messages=C,this.define(e)}N.prototype={messages:function(e){return e&&(this._messages=w(V(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,a;for(t in this.rules={},e)e.hasOwnProperty(t)&&(a=e[t],this.rules[t]=Array.isArray(a)?a:[a])},validate:function(e,t,a){var i=this;void 0===t&&(t={}),void 0===a&&(a=function(){});var l,o,s=e,n=t,r=a;if("function"==typeof n&&(r=n,n={}),!this.rules||0===Object.keys(this.rules).length)return r&&r(),Promise.resolve();if(n.messages){var d=this.messages();d===C&&(d=V()),w(d,n.messages),n.messages=d}else n.messages=this.messages();var u={};(n.keys||Object.keys(this.rules)).forEach((function(t){l=i.rules[t],o=s[t],l.forEach((function(a){var l=a;"function"==typeof l.transform&&(s===e&&(s=c({},s)),o=s[t]=l.transform(o)),(l="function"==typeof l?{validator:l}:c({},l)).validator=i.getValidationMethod(l),l.field=t,l.fullField=l.fullField||t,l.type=i.getType(l),l.validator&&(u[t]=u[t]||[],u[t].push({rule:l,value:o,source:s,field:t}))}))}));var h={};return f(u,n,(function(e,t){var a,i=e.rule,l=!("object"!==i.type&&"array"!==i.type||"object"!=typeof i.fields&&"object"!=typeof i.defaultField);function o(e,t){return c({},t,{fullField:i.fullField+"."+e})}function s(a){void 0===a&&(a=[]);var s=a;if(Array.isArray(s)||(s=[s]),!n.suppressWarning&&s.length&&N.warning("async-validator:",s),s.length&&i.message&&(s=[].concat(i.message)),s=s.map(y(i)),n.first&&s.length)return h[i.field]=1,t(s);if(l){if(i.required&&!e.value)return s=i.message?[].concat(i.message).map(y(i)):n.error?[n.error(i,m(n.messages.required,i.field))]:[],t(s);var r={};if(i.defaultField)for(var d in e.value)e.value.hasOwnProperty(d)&&(r[d]=i.defaultField);for(var u in r=c({},r,{},e.rule.fields))if(r.hasOwnProperty(u)){var p=Array.isArray(r[u])?r[u]:[r[u]];r[u]=p.map(o.bind(null,u))}var g=new N(r);g.messages(n.messages),e.rule.options&&(e.rule.options.messages=n.messages,e.rule.options.error=n.error),g.validate(e.value,e.rule.options||n,(function(e){var a=[];s&&s.length&&a.push.apply(a,s),e&&e.length&&a.push.apply(a,e),t(a.length?a:null)}))}else t(s)}l=l&&(i.required||!i.required&&e.value),i.field=e.field,i.asyncValidator?a=i.asyncValidator(i,e.value,s,e.source,n):i.validator&&(!0===(a=i.validator(i,e.value,s,e.source,n))?s():!1===a?s(i.message||i.field+" fails"):a instanceof Array?s(a):a instanceof Error&&s(a.message)),a&&a.then&&a.then((function(){return s()}),(function(e){return s(e)}))}),(function(e){!function(e){var t,a,i,l=[],o={};for(t=0;t<e.length;t++)a=e[t],i=void 0,Array.isArray(a)?l=(i=l).concat.apply(i,a):l.push(a);l.length?o=p(l):(l=null,o=null),r(l,o)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!_.hasOwnProperty(e.type))throw new Error(m("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),a=t.indexOf("message");return-1!==a&&t.splice(a,1),1===t.length&&"required"===t[0]?_.required:_[this.getType(e)]||!1}},N.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");_[e]=t},N.warning=u,N.messages=C,N.warning=function(){};const E=a({name:"u-form-item",mixins:[n],inject:{uForm:{default:()=>null}},props:{label:{type:String,default:""},prop:{type:String,default:""},borderBottom:{type:[String,Boolean],default:""},labelClass:{type:String,default:""},labelPosition:{type:String,default:""},labelWidth:{type:[String,Number],default:"5em"},labelStyle:{type:Object,default:()=>({})},labelAlign:{type:String,default:""},rightIcon:{type:String,default:""},leftIcon:{type:String,default:""},leftIconStyle:{type:Object,default:()=>({})},rightIconStyle:{type:Object,default:()=>({})},justifyContent:{type:String,default:""},required:{type:Boolean,default:!1},inputAlign:{type:String,default:""}},data:()=>({initialValue:"",validateState:"",validateMessage:"",errorType:["message"],fieldValue:"",parentData:{borderBottom:!0,labelWidth:90,labelPosition:"left",labelStyle:{},labelAlign:"left",inputAlign:"left"}}),watch:{validateState(e){this.broadcastInputError()},"uForm.errorType"(e){this.errorType=e,this.broadcastInputError()}},computed:{uLabelWidth(){return"left"==this.elLabelPosition?"true"===this.label||""===this.label?"auto":this.$u.addUnit(this.elLabelWidth):"100%"},showError(){return e=>!(this.errorType.indexOf("none")>=0)&&this.errorType.indexOf(e)>=0},elLabelWidth(){return this.parentData.labelWidth&&90!=this.parentData.labelWidth&&"5em"==this.labelWidth?this.parentData.labelWidth:0!=this.labelWidth||""!=this.labelWidth?this.labelWidth:this.parentData.labelWidth?this.parentData.labelWidth:90},elLabelStyle(){return Object.keys(this.labelStyle).length?this.labelStyle:this.parentData.labelStyle?this.parentData.labelStyle:{}},elLabelPosition(){return this.labelPosition?this.labelPosition:this.parentData.labelPosition?this.parentData.labelPosition:"left"},elLabelAlign(){return this.labelAlign?this.labelAlign:this.parentData.labelAlign?this.parentData.labelAlign:"left"},elBorderBottom(){return""!==this.borderBottom?this.borderBottom:!this.parentData.borderBottom||this.parentData.borderBottom},elInputAlign(){return this.inputAlign?this.inputAlign:this.parentData.inputAlign?this.parentData.inputAlign:"left"}},methods:{broadcastInputError(){this.broadcast("u-input","onFormItemError","error"===this.validateState&&this.showError("border"))},setRules(){},getRules(){let e=this.parent.rules;return e=e?e[this.prop]:[],[].concat(e||[])},onFieldBlur(){this.validation("blur")},onFieldChange(){this.validation("change")},getFilteredRule(e=""){let t=this.getRules();return e?t.filter((t=>t.trigger&&-1!==t.trigger.indexOf(e))):t},getData(e,t,a){let i;if(e){i=JSON.parse(JSON.stringify(e));let a="",l=".",o="[",s="]";t=t.replace(/\s+/g,a)+l;let n=a;for(let e=0;e<t.length;e++){let r=t.charAt(e);r!=l&&r!=o&&r!=s?n+=r:i&&(n!=a&&(i=i[n]),n=a)}}return void 0===i&&void 0!==a&&(i=a),i},setData(e,t,a){let i;i="object"==typeof a?JSON.parse(JSON.stringify(a)):a;let l=new RegExp("([\\w$]+)|\\[(:\\d)\\]","g");const o=t.match(l);for(let s=0;s<o.length-1;s++){let t=o[s];"object"!=typeof e[t]&&(e[t]={}),e=e[t]}e[o[o.length-1]]=i},validation(e,t=(()=>{})){this.fieldValue=this.getData(this.parent.model,this.prop);let a=this.getFilteredRule(e);if(!a||0===a.length)return t("");this.validateState="validating",new N({[this.prop]:a}).validate({[this.prop]:this.fieldValue},{firstFields:!0},((e,a)=>{this.validateState=e?"error":"success",this.validateMessage=e?e[0].message:"";let i=e?e[0].field:"";t(this.validateMessage,{state:this.validateState,key:i,msg:this.validateMessage})}))},resetField(){this.setData(this.parent.model,this.prop,this.initialValue),this.validateState="success"}},mounted(){this.parent=this.$u.$parent.call(this,"u-form"),this.parent&&(Object.keys(this.parentData).map((e=>{this.parentData[e]=this.parent[e]})),this.prop&&(this.parent.fields.push(this),this.errorType=this.parent.errorType,this.initialValue=this.fieldValue,this.$nextTick((()=>{this.setRules()}))))},beforeUnmount(){this.parent&&this.prop&&this.parent.fields.map(((e,t)=>{e===this&&this.parent.fields.splice(t,1)}))}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-icon"),i);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-form-item",{"u-border-bottom":r.elBorderBottom,"u-form-item__border-bottom--error":"error"===n.validateState&&r.showError("border-bottom")}])},[e.createElementVNode("view",{class:"u-form-item__body",style:e.normalizeStyle({flexDirection:"left"==r.elLabelPosition?"row":"column"})},[l.label?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-form-item--left",style:e.normalizeStyle({width:r.uLabelWidth,marginBottom:"left"==r.elLabelPosition?0:"10rpx"})},[l.required||l.leftIcon||l.label?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["u-form-item--left__content",l.labelClass])},[l.required?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-form-item--left__content--required"},"*")):e.createCommentVNode("",!0),l.leftIcon?(e.openBlock(),e.createElementBlock("view",{key:1,class:"u-form-item--left__content__icon"},[e.createVNode(c,{name:l.leftIcon,"custom-style":l.leftIconStyle},null,8,["name","custom-style"])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["u-form-item--left__content__label",l.labelAlign]),style:e.normalizeStyle([r.elLabelStyle,{"justify-content":"left"==r.elLabelAlign?"flex-start":"center"==r.elLabelAlign?"center":"flex-end"}])},e.toDisplayString(l.label),7)],2)):e.createCommentVNode("",!0)],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"u-form-item--right u-flex"},[e.createElementVNode("view",{class:"u-form-item--right__content"},[e.createElementVNode("view",{class:e.normalizeClass(["u-form-item--right__content__slot",l.justifyContent]),style:e.normalizeStyle("left"==r.elLabelPosition&&"right"==r.elInputAlign?"text-align:right;display: inline-block;line-height:initial;":"")},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6),t.$slots.right||l.rightIcon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-form-item--right__content__icon u-flex"},[l.rightIcon?(e.openBlock(),e.createBlock(c,{key:0,"custom-style":l.rightIconStyle,name:l.rightIcon},null,8,["custom-style","name"])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"right",{},void 0,!0)])):e.createCommentVNode("",!0)])])],4),"error"===n.validateState&&r.showError("message")?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-form-item__message",style:e.normalizeStyle({paddingLeft:"left"==r.elLabelPosition?"calc("+t.$u.addUnit(r.elLabelWidth)+" + 24rpx)":"0",textAlign:"right"==r.elInputAlign?"right":"left"})},e.toDisplayString(n.validateMessage),5)):e.createCommentVNode("",!0)],2)}],["__scopeId","data-v-82e70324"]]);const B=a({data:()=>({userInfo:{},globalOption:{},globalData:{},user:{msg:"",status:0,success:!0,data:{info:{user_id:0,is_admin:0,num:0}}},logout:{msg:"未登录",status:-2,success:!1,data:{}},usernameFocus:!1,username:"",passwordFocus:!1,password:""}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){},async userApi(e){let t={username:(e=e||{}).username||this.username||"admin",password:e.password||this.password||"admin"},a=await this.$http.post("/login",t,{},"json");this.user=a,0==a.status?(this.navigateTo({type:"tip",tip:"登陆成功"}),this.navigateTo({type:"page",url:"index"})):this.navigateTo({type:"tip",tip:"登陆失败"}),this.$session.setUser(onlogin.data.info)},async logoutApi(e){let t=await this.$http.post("/logout",{},{},"json");this.logout=t}}},[["render",function(t,a,i,l,s,n){const c=o(e.resolveDynamicComponent("u-input"),r),d=o(e.resolveDynamicComponent("u-form-item"),E);return e.openBlock(),e.createElementBlock("view",{class:"container container333415"},[e.createElementVNode("view",{class:"flex diygw-col-24 flex-direction-column justify-center items-center flex-nowrap flex-clz"}),e.createElementVNode("text",{class:"diygw-col-24 logintitle-clz diygw-text-lg"}," 优雅草科技AI制图 - 内部版本 "),e.createElementVNode("text",{class:"diygw-col-24 text-clz diygw-text-sm"}," 支持内部员工和优雅草代理商登录 "),e.createVNode(d,{class:"diygw-col-24 username-clz diygw-form-item-small",labelPosition:"top",prop:"username"},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"diy-icon-my margin-right-xs",style:{color:"#13beff","font-size":"32rpx"}}),e.createVNode(c,{focus:s.usernameFocus,placeholder:"请输入用户名",modelValue:s.username,"onUpdate:modelValue":a[0]||(a[0]=e=>s.username=e)},null,8,["focus","modelValue"])])),_:1}),e.createVNode(d,{class:"diygw-col-24 password-clz diygw-form-item-small",labelPosition:"top",prop:"password"},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"diy-icon-lock margin-right-xs",style:{color:"#13beff","font-size":"32rpx"}}),e.createVNode(c,{focus:s.passwordFocus,placeholder:"请输入密码",modelValue:s.password,"onUpdate:modelValue":a[1]||(a[1]=e=>s.password=e),type:"password","password-icon":!0},null,8,["focus","modelValue"])])),_:1}),e.createElementVNode("view",{class:"flex diygw-col-24 button-clz"},[e.createElementVNode("button",{style:{color:"#ffffff !important","background-color":"#13beff !important"},onClick:a[2]||(a[2]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"userApi","data-username":s.username,"data-password":s.password,class:"diygw-btn md flex-sub margin-xs button-button-clz"},"点击登录",8,["data-username","data-password"])]),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-bd22bfcb"]]);let z=uni.getSystemInfoSync(),$={};const D=a({name:"u-navbar",props:{height:{type:[String,Number],default:""},backIconColor:{type:String,default:"#606266"},backUrl:{type:String,default:""},backIconName:{type:String,default:"nav-back"},backIconSize:{type:[String,Number],default:"44"},backText:{type:String,default:""},backTextStyle:{type:Object,default:()=>({color:"#606266"})},title:{type:String,default:""},isSlot:{type:[Boolean,String],default:!1},isSlotTitle:{type:[Boolean,String],default:!1},titleWidth:{type:[String,Number],default:"250"},titleColor:{type:String,default:"#606266"},titleBold:{type:Boolean,default:!1},titleSize:{type:[String,Number],default:32},isCapsule:{type:[Boolean,String],default:!1},isBack:{type:[Boolean,String],default:!0},isHome:{type:[Boolean,String],default:!1},background:{type:Object,default:()=>({background:"#ffffff"})},bgColor:{type:String,default:""},isFixed:{type:Boolean,default:!0},immersive:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:""},customBack:{type:Function,default:null}},data:()=>({menuButtonInfo:$,statusBarHeight:z.statusBarHeight}),computed:{navbarInnerStyle(){let e={};return e.height=this.navbarHeight+"px",e},navbarStyle(){let e={};return e.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.navbar,Object.assign(e,this.background),e},titleStyle(){let e={};return e.left=(z.windowWidth-uni.upx2px(this.titleWidth))/2+"px",e.right=(z.windowWidth-uni.upx2px(this.titleWidth))/2+"px",e.width=uni.upx2px(this.titleWidth)+"px",e},navbarHeight(){return this.height?this.height:44}},created(){},methods:{getHome(){getApp().globalData.homePage?uni.reLaunch({url:getApp().globalData.homePage}):uni.showToast({icon:"none",title:"请先设置首页地址"})},goBack(){"function"==typeof this.customBack?this.customBack.bind(this.$u.$parent.call(this))():this.backUrl?getApp().globalData.tabBar.includes(this.backUrl)?uni.switchTab({url:this.backUrl}):uni.redirectTo({url:this.backUrl}):uni.navigateBack()}}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-icon"),i);return e.openBlock(),e.createElementBlock("view",{class:""},[e.createElementVNode("view",{class:e.normalizeClass(["u-navbar",[l.isFixed?"u-navbar-fixed":"",l.borderBottom?"u-border-bottom":"",l.bgColor]]),style:e.normalizeStyle([r.navbarStyle])},[e.createElementVNode("view",{class:"u-status-bar",style:e.normalizeStyle({height:n.statusBarHeight+"px"})},null,4),e.createElementVNode("view",{class:"u-navbar-inner",style:e.normalizeStyle([r.navbarInnerStyle])},[l.isBack||l.isHome?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["flex align-center",l.isCapsule?"diy-navbar-solid":"diy-navbar-default"])},[l.isBack?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-back-wrap",onClick:a[0]||(a[0]=(...e)=>r.goBack&&r.goBack(...e))},[e.createElementVNode("view",{class:"u-icon-wrap"},[e.createVNode(c,{name:l.backIconName,color:l.backIconColor,size:l.backIconSize},null,8,["name","color","size"])]),l.backText?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-icon-wrap u-back-text u-line-1",style:e.normalizeStyle([l.backTextStyle])},e.toDisplayString(l.backText),5)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),l.isHome&&l.isBack?(e.openBlock(),e.createElementBlock("view",{key:1,class:"diy-navbar-split",style:e.normalizeStyle({borderLeft:"1px solid "+l.backIconColor})},null,4)):e.createCommentVNode("",!0),l.isHome?(e.openBlock(),e.createElementBlock("view",{key:2,class:"u-back-wrap u-back-home",onClick:a[1]||(a[1]=(...e)=>r.getHome&&r.getHome(...e))},[e.createElementVNode("view",{class:"u-icon-wrap"},[e.createVNode(c,{name:"home",customPrefix:"diy-icon",color:l.backIconColor,size:l.backIconSize},null,8,["color","size"])])])):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0),l.isSlot||!l.title&&!l.isSlotTitle?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"u-navbar-content-title",style:e.normalizeStyle([r.titleStyle])},[l.isSlotTitle?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-title u-line-1",style:e.normalizeStyle({color:l.titleColor,fontSize:l.titleSize+"rpx",fontWeight:l.titleBold?"bold":"normal"})},[e.renderSlot(t.$slots,"title",{},void 0,!0)],4)):(e.openBlock(),e.createElementBlock("view",{key:1,class:"u-title u-line-1",style:e.normalizeStyle({color:l.titleColor,fontSize:l.titleSize+"rpx",fontWeight:l.titleBold?"bold":"normal"})},e.toDisplayString(l.title),5))],4)),e.createElementVNode("view",{class:"u-slot-content"},[e.renderSlot(t.$slots,"default",{},void 0,!0)]),e.createElementVNode("view",{class:"u-slot-right"},[e.renderSlot(t.$slots,"right",{},void 0,!0)])],4)],6),l.isFixed&&!l.immersive?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-navbar-placeholder",style:e.normalizeStyle({width:"100%",height:Number(r.navbarHeight)+n.statusBarHeight+"px"})},null,4)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-7f095ff0"]]);const T=a({name:"u-line-progress",props:{round:{type:Boolean,default:!0},type:{type:String,default:""},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#ececec"},percent:{type:Number,default:0},showPercent:{type:Boolean,default:!0},height:{type:[Number,String],default:28},striped:{type:Boolean,default:!1},stripedActive:{type:Boolean,default:!1}},data:()=>({}),computed:{progressStyle(){let e={};return e.width=this.percent+"%",this.activeColor&&(e.backgroundColor=this.activeColor),e}},methods:{}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:"u-progress",style:e.normalizeStyle({borderRadius:i.round?"100rpx":0,height:i.height+"rpx",backgroundColor:i.inactiveColor})},[e.createElementVNode("view",{class:e.normalizeClass([[i.type?`u-type-${i.type}-bg`:"",i.striped?"u-striped":"",i.striped&&i.stripedActive?"u-striped-active":""],"u-active"]),style:e.normalizeStyle([s.progressStyle])},[t.$slots.default||t.$slots.$default?e.renderSlot(t.$slots,"default",{key:0},void 0,!0):i.showPercent?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(i.percent+"%"),1)],64)):e.createCommentVNode("",!0)],6)],4)}],["__scopeId","data-v-7121b71a"]]);const A=a({name:"u-upload",mixins:[n],emits:["update:modelValue","change","update:file-list","on-oversize","on-list-change","on-preview","on-remove","on-success","on-change","on-error","on-progress","on-uploaded","on-choose-complete","on-choose-fail"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},showUploadList:{type:Boolean,default:!0},action:{type:String,default:""},maxCount:{type:[String,Number],default:52},showProgress:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},imageMode:{type:String,default:"aspectFill"},header:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},name:{type:String,default:"file"},sizeType:{type:Array,default:()=>["original","compressed"]},sourceType:{type:Array,default:()=>["album","camera"]},previewFullImage:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},maxSize:{type:[String,Number],default:Number.MAX_VALUE},fileList:{type:Array,default:()=>[]},uploadText:{type:String,default:"选择图片"},autoUpload:{type:Boolean,default:!0},base64:{type:Boolean,default:!1},showTips:{type:Boolean,default:!0},customBtn:{type:Boolean,default:!1},quality:{type:Number,default:100},width:{type:[String,Number],default:200},height:{type:[String,Number],default:200},delBgColor:{type:String,default:"#fa3534"},delColor:{type:String,default:"#ffffff"},delIcon:{type:String,default:"close"},successIcon:{type:String,default:"checkbox-mark"},successColor:{type:String,default:"#ffffff"},toJson:{type:Boolean,default:!0},beforeUpload:{type:Function,default:null},beforeRemove:{type:Function,default:null},limitType:{type:Array,default:()=>["png","jpg","jpeg","webp","gif","image"]},index:{type:[Number,String],default:""},margin:{type:[Number,String],default:"10"}},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},data:()=>({lists:[],isInCount:!0,uploading:!1,uForm:{inputAlign:"",clearable:""}}),computed:{valueCom(){return this.modelValue}},watch:{valueCom(e,t){e?this.base64?function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}(e,t)||this.initValue(e):e!=t&&this.initValue(e):this.lists=[]},fileList:{immediate:!0,handler(e){let t=JSON.parse(JSON.stringify(this.lists));e.map((e=>{t.some((t=>t.url==e.url))||(e.url.indexOf(";base64,")>0?e.url:getApp().globalData.currentPage&&getApp().globalData.currentPage.$tools?getApp().globalData.currentPage.$tools.renderImage(e.url):e.url)})),this.lists=JSON.parse(JSON.stringify(t))}},lists:{deep:!0,handler(e){this.$emit("update:file-list",e);let t=e.filter((e=>e&&e.url)).map((e=>e.url)),a=this.base64&&this.maxCount>1?t:t.join(",");this.$emit("update:modelValue",a),this.$emit("change",a),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange")}),40),this.$emit("on-list-change",e,this.index)}}},created(){this.valueCom&&this.initValue(this.valueCom)},methods:{initValue(e){e?this.base64?Array.isArray(e)?0==e.length?this.lists=[]:this.lists=e.map((e=>({url:e}))):this.lists=[{url:e}]:this.lists=e.split(",").map((e=>({url:e}))):this.lists=[]},clear(){this.lists=[]},reUpload(){this.uploadFile()},selectFile(){let e=this;if(e.disabled)return;const{name:t="",maxCount:a,multiple:i,maxSize:l,sizeType:o,camera:s,compressed:n,maxDuration:r,sourceType:c}=e;let d=null,u=JSON.parse(JSON.stringify(e.lists));const p=a-u.length;d=new Promise(((e,t)=>{uni.chooseImage({count:i?p>9?9:p:1,sourceType:c,sizeType:o,success:e,fail:t})})),d.then((t=>{let o=e.lists.length;t.tempFiles.map(((t,o)=>{if(e.checkFileExt(t)&&(i||!(o>=1)))if(t.size>l)e.$emit("on-oversize",t,e.lists,e.index),e.showToast("超出允许的文件大小");else{if(a<=u.length)return e.$emit("on-exceed",t,e.lists,e.index),void e.showToast("超出最大允许的文件个数");u.push({type:t.type,url:t.path,progress:0,error:!1,file:t})}})),e.deepClone(u,e.lists),e.$emit("on-choose-complete",e.lists,e.index),e.autoUpload&&e.uploadFile(o)})).catch((t=>{e.$emit("on-choose-fail",t)}))},showToast(e,t=!1){(this.showTips||t)&&uni.showToast({title:e,icon:"none"})},upload(){this.uploadFile()},retry(e){this.lists[e].progress=0,this.lists[e].error=!1,this.lists[e].response=null,uni.showLoading({title:"重新上传"}),this.uploadFile(e)},async compressImage(e,t){const a=this;return new Promise(((i,o)=>{"string"!=typeof e&&(l("error","at uni_modules/diy-uview-ui/components/u-upload/u-upload.vue:553","压缩路径错误"),o([])),uni.compressImage({src:e,quality:a.quality||80,success:async e=>{let a=await this.imageToBase64(e.tempFilePath,t,100);i(a)},fail(e){o(e),uni.hideLoading()}})}))},canvasDataURL(e,t,a){var i=new Image;i.src=e,i.onload=function(){var e=this,i=e.width,l=e.height,o=i/l;i=t.width||i,l=t.height||i/o;var s=.8,n=document.createElement("canvas"),r=n.getContext("2d"),c=document.createAttribute("width");c.nodeValue=i;var d=document.createAttribute("height");d.nodeValue=l,n.setAttributeNode(c),n.setAttributeNode(d),r.drawImage(e,0,0,i,l),t.quality&&t.quality<=1&&t.quality>0&&(s=t.quality);var u=n.toDataURL(t.type,s);a(u)}},imageToBase64(e,t,a=100){return uni.getFileSystemManager?100==a?new Promise(((a,i)=>{uni.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:e=>{let i="data:"+t+";base64,"+e.data;a(i)},fail:e=>{i(e)}})})):this.compressImage(e,t,a):100==a?new Promise(((t,a)=>{plus.io.resolveLocalFileSystemURL(e,(function(e){e.file((function(e){var a=new plus.io.FileReader;a.readAsDataURL(e),a.onloadend=function(e){t(e.target.result)}}))}))})):this.compressImage(e,t,a)},async uploadFile(e=0){if(this.disabled)return;if(this.uploading)return;if(e>=this.lists.length)return void this.$emit("on-uploaded",this.lists,this.index);if(100==this.lists[e].progress)return void(0==this.autoUpload&&this.uploadFile(e+1));if(this.beforeUpload&&"function"==typeof this.beforeUpload){let t=this.beforeUpload.bind(this.$u.$parent.call(this))(e,this.lists);if(t&&"function"==typeof t.then)await t.then((e=>{})).catch((t=>this.uploadFile(e+1)));else if(!1===t)return this.uploadFile(e+1)}if(this.base64){let t=await this.imageToBase64(this.lists[e].url,this.lists[e].type?this.lists[e].type:"image/png",this.quality),a={url:t};return this.lists[e].url=t,this.lists[e].response=a,this.lists[e].progress=100,this.lists[e].error=!1,this.$emit("on-success",a,e,this.lists,this.index),this.uploading=!1,this.$emit("on-change",a,e,this.lists,this.index),this.uploadFile(e+1)}if(!this.action)return void this.showToast("请配置上传地址",!0);this.lists[e].error=!1,this.uploading=!0,getApp().globalData.currentPage&&getApp().globalData.currentPage.$session&&(this.header.Authorization=getApp().globalData.currentPage.$session.getToken()||"");uni.uploadFile({url:getApp().globalData.currentPage&&getApp().globalData.currentPage.$http?getApp().globalData.currentPage.$http.setUrl(this.action,{}):this.action,filePath:this.lists[e].url,name:this.name,formData:this.formData,header:this.header,success:t=>{let a=this.toJson&&this.$u.test.jsonString(t.data)?JSON.parse(t.data):t.data;if(!a||a&&401==a.code)return l("log","at uni_modules/diy-uview-ui/components/u-upload/u-upload.vue:772","请返回正确结构数据比如:{code:200,data:{url:'图片路径'}}"),this.uploadError(e,a),void(a&&401==a.code&&(getApp().globalData.currentPage.$session.clearUser(),uni.reLaunch({url:getApp().globalData.homePage})));if(!a.url&&a.data&&(a=a.data),[200,201,204].includes(t.statusCode)){if(!a.url)return l("log","at uni_modules/diy-uview-ui/components/u-upload/u-upload.vue:792","请返回正确结构数据比如:{code:200,data:{url:'图片路径'}}"),void this.uploadError(e,a);this.lists[e].url=getApp().globalData.currentPage&&getApp().globalData.currentPage.$tools?getApp().globalData.currentPage.$tools.renderImage(a.url):a.url,this.lists[e].response=a,this.lists[e].progress=100,this.lists[e].error=!1,this.$emit("on-success",a,e,this.lists,this.index)}else this.uploadError(e,a)},fail:t=>{this.uploadError(e,t)},complete:t=>{uni.hideLoading(),this.uploading=!1,this.uploadFile(e+1),this.$emit("on-change",t,e,this.lists,this.index)}}).onProgressUpdate((t=>{t.progress>0&&(this.lists[e].progress=t.progress,this.$emit("on-progress",t,e,this.lists,this.index))}))},uploadError(e,t){this.lists[e].progress=0,this.lists[e].error=!0,this.lists[e].response=null,this.$emit("on-error",t,e,this.lists,this.index),this.showToast("上传失败，请重试")},deleteItem(e){uni.showModal({title:"提示",content:"您确定要删除此项吗？",success:async t=>{if(t.confirm)if(this.beforeRemove&&"function"==typeof this.beforeRemove){let t=this.beforeRemove.bind(this.$u.$parent.call(this))(e,this.lists);t&&"function"==typeof t.then?await t.then((t=>{this.handlerDeleteItem(e)})).catch((e=>{this.showToast("已终止移除")})):!1===t?this.showToast("已终止移除"):this.handlerDeleteItem(e)}else this.handlerDeleteItem(e)}})},handlerDeleteItem(e){this.lists[e].progress<100&&this.lists[e].progress>0&&void 0!==this.lists[e].uploadTask&&this.lists[e].uploadTask.abort(),this.lists.splice(e,1),this.$forceUpdate(),this.$emit("on-remove",e,this.lists,this.index)},remove(e){e>=0&&e<this.lists.length&&this.lists.splice(e,1)},doPreviewImage(e,t){if(!this.previewFullImage)return void this.$emit("on-preview",e,this.lists,this.index);const a=this.lists.map((e=>e.url||e.path));uni.previewImage({urls:a,current:e,success:()=>{this.$emit("on-preview",e,this.lists,this.index)},fail:()=>{uni.showToast({title:"预览图片失败",icon:"none"})}})},checkFileExt(e){let t=!1,a="";return a=e.path.replace(/.+\./,"").toLowerCase(),t=this.limitType.some((e=>e.toLowerCase()===a)),t||this.showToast(`不允许选择${a}格式的文件`),t},deepClone(e,t){for(let a in e){const i=e[a];Array.isArray(i)?(t[a]=[],this.deepClone(i,t[a])):null!==i&&"object"==typeof i?(t[a]={},this.deepClone(i,t[a])):t[a]=i}}}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-icon"),i),d=o(e.resolveDynamicComponent("u-line-progress"),T);return e.openBlock(),e.createElementBlock("view",{class:"u-upload"},[l.showUploadList?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(n.lists,((a,i)=>(e.openBlock(),e.createElementBlock("view",{class:"u-list-item u-preview-wrap",key:i,style:e.normalizeStyle({marginTop:0,marginLeft:0,marginRight:t.$u.addUnit(l.margin),marginBottom:t.$u.addUnit(l.margin),width:t.$u.addUnit(l.width),height:t.$u.addUnit(l.height)})},[l.deletable&&!l.disabled?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-delete-icon",onClick:e.withModifiers((e=>r.deleteItem(i)),["stop"]),style:e.normalizeStyle({background:l.delBgColor})},[e.createVNode(c,{class:"u-icon",name:l.delIcon,size:"20",color:l.delColor},null,8,["name","color"])],12,["onClick"])):e.createCommentVNode("",!0),l.showProgress&&a.progress>0&&100!=a.progress&&!a.error?(e.openBlock(),e.createBlock(d,{key:1,"show-percent":!1,height:"16",class:"u-progress",percent:a.progress},null,8,["percent"])):e.createCommentVNode("",!0),a.error?(e.openBlock(),e.createElementBlock("view",{key:2,onClick:e.withModifiers((e=>r.retry(i)),["stop"]),class:"u-error-btn"},"点击重试",8,["onClick"])):e.createCommentVNode("",!0),a.isImage?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("image",{key:3,onClick:e.withModifiers((e=>r.doPreviewImage(a.url||a.path,i)),["stop"]),class:"u-preview-image",src:a.url||a.path,mode:l.imageMode},null,8,["onClick","src","mode"]))],4)))),128)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"file",{file:n.lists},void 0,!0),l.maxCount>n.lists.length&&!l.disabled?(e.openBlock(),e.createElementBlock("view",{key:1,style:{display:"inline-block"},onClick:a[0]||(a[0]=(...e)=>r.selectFile&&r.selectFile(...e))},[e.renderSlot(t.$slots,"addBtn",{},void 0,!0),l.customBtn?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-list-item u-add-wrap","hover-class":"u-add-wrap__hover","hover-stay-time":"150",style:e.normalizeStyle({marginTop:0,marginLeft:0,marginRight:t.$u.addUnit(l.margin),marginBottom:t.$u.addUnit(l.margin),width:t.$u.addUnit(l.width),height:t.$u.addUnit(l.height)})},[e.createVNode(c,{name:"camera",class:"u-add-btn",size:"60"})],4))])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-ddb7bace"]]);const I=a({name:"u-slider",emits:["update:modelValue","input","start","moving","end"],props:{value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},showValue:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},blockWidth:{type:[Number,String],default:30},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},height:{type:[Number,String],default:6},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#c0c4cc"},blockColor:{type:String,default:"#ffffff"},blockStyle:{type:Object,default:()=>({})}},data:()=>({startX:0,status:"end",newValue:0,distanceX:0,startValue:0,barStyle:{},sliderRect:{left:0,width:0}}),computed:{valueCom(){return this.modelValue}},methods:{changeHandler(e){const{value:t}=e.detail;this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t)}}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-slider",[i.disabled?"u-slider--disabled":""]])},[e.createElementVNode("slider",{min:i.min,max:i.max,step:i.step,value:s.valueCom,activeColor:i.activeColor,inactiveColor:i.inactiveColor,blockColor:i.blockColor,showValue:i.showValue,disabled:i.disabled,onChange:a[0]||(a[0]=(...e)=>s.changeHandler&&s.changeHandler(...e))},null,40,["min","max","step","value","activeColor","inactiveColor","blockColor","showValue","disabled"])],2)}],["__scopeId","data-v-c0eef64a"]]);const P=a({name:"u-input",emits:["update:modelValue","input","change","blur","focus","click","touchstart","confirm"],mixins:[n],props:{value:{type:[String,Number,Array],default:""},modelValue:{type:[String,Number,Array],default:""},list:{type:Array,default:[]},mode:{type:String,default:""},iconName:{type:String,default:"arrow-right"},iconColor:{type:String,default:"#c0c4cc"},type:{type:String,default:"select"},inputAlign:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #c0c4cc;"},customStyle:{type:Object,default:()=>({})},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!1},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},clearable:{type:[Boolean,String],default:!0},backgroundColor:{type:String},padding:{type:String},valueName:{type:String,default:"value"},labelName:{type:String,default:"label"},icon:{type:String,default:""},iconSize:{type:String,default:"16px"}},data:()=>({defaultValue:"",inputHeight:70,validateState:!1,focused:!1,lastValue:"",uForm:{inputAlign:"",clearable:""}}),watch:{valueCom(e,t){e!=t&&"select"==this.type&&this.initDefaultValue(e)}},computed:{valueCom(){return this.modelValue},inputAlignCom(){return this.inputAlign||this.uForm.inputAlign||"left"},clearableCom(){return"boolean"==typeof this.clearable?this.clearable:"boolean"!=typeof this.uForm.clearable||this.uForm.clearable},inputMaxlength(){return Number(this.maxlength)},getStyle(){let e={};return e.minHeight=(this.height?isNaN(this.height)?this.height:this.height+"rpx":this.inputHeight+"rpx")+" !important",e=Object.assign(e,this.customStyle),e}},created(){this.initDefaultValue(this.valueCom)},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},methods:{getColumnLabel(e,t,a,i){let l=t[i],o=e.find((e=>e[this.valueName]==l));if(o&&(a.push(o[this.labelName]),++i<t.length)){let e=o.children;e&&e.length>0&&this.getColumnLabel(e,t,a,i)}},initDefaultValue(e){if("multi"==this.mode){let t=[];e.forEach(((e,a)=>{let i=this.list[a].find((t=>t[this.valueName]==e));t.push(i?i[this.labelName]:"")})),this.defaultValue=t.join("-")}else if("mutil-column-auto"==this.mode){if(Array.isArray(e)&&e.length>0){let t=0,a=[];this.getColumnLabel(this.list,e,a,t),this.defaultValue=a.join("-")}}else{let t=this.list.filter((t=>{if(Array.isArray(e)&&e.includes(t[this.valueName])||!Array.isArray(e)&&t[this.valueName]==e)return t})).map((e=>e[this.labelName]));this.defaultValue=t.join("-")}},handleInput(e){let t=e.detail.value;this.$emit("input",t),this.$emit("update:modelValue",t),this.initDefaultValue(t),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),40)},handleBlur(e){setTimeout((()=>{this.focused=!1}),100),this.$emit("blur",e.detail.value),this.$emit("update:modelValue",e.detail.value),setTimeout((()=>{this.dispatch("u-form-item","onFieldBlur",e.detail.value)}),40)},onFormItemError(e){this.validateState=e},onFocus(e){this.focused=!0,this.$emit("focus")},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.defaultValue="",this.$nextTick((()=>{this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("change",""),this.focused=!0}))},inputClick(){this.$emit("click")}}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-icon"),i);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-input",{"u-input--border":l.border,"u-input--error":n.validateState}]),style:e.normalizeStyle({padding:l.padding?l.padding:`0 ${l.border?20:0}rpx`,borderColor:l.borderColor,textAlign:r.inputAlignCom,backgroundColor:l.backgroundColor}),onClick:a[5]||(a[5]=e.withModifiers(((...e)=>r.inputClick&&r.inputClick(...e)),["stop"]))},[e.createElementVNode("input",{class:e.normalizeClass(["u-input__input",{disabled:l.disabled||"select"===l.type}]),type:"text",style:e.normalizeStyle([r.getStyle]),value:n.defaultValue,placeholder:l.placeholder,placeholderStyle:l.placeholderStyle,disabled:l.disabled||"select"===l.type,maxlength:r.inputMaxlength,focus:l.focus,onFocus:a[0]||(a[0]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:a[1]||(a[1]=(...e)=>r.handleBlur&&r.handleBlur(...e)),onInput:a[2]||(a[2]=(...e)=>r.handleInput&&r.handleInput(...e)),onConfirm:a[3]||(a[3]=(...e)=>r.onConfirm&&r.onConfirm(...e))},null,46,["value","placeholder","placeholderStyle","disabled","maxlength","focus"]),e.createElementVNode("view",{class:"u-input__right-icon u-flex"},[r.clearableCom&&""!=r.valueCom&&n.focused?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-input__right-icon__clear u-input__right-icon__item",onClick:a[4]||(a[4]=(...e)=>r.onClear&&r.onClear(...e))},[e.createVNode(c,{size:"32",name:"close-circle-fill",color:"#c0c4cc"})])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["u-input__right-icon--select u-input__right-icon__item",{"u-input__right-icon--select--reverse":l.selectOpen}])},[l.icon?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass(l.icon),style:e.normalizeStyle({color:l.iconColor,fontSize:l.iconSize})},null,6)):(e.openBlock(),e.createBlock(c,{key:1,name:"arrow-right",size:"26",color:"#c0c4cc"}))],2)])],6)}],["__scopeId","data-v-ac2fb3fa"]]);const j=a({name:"u-mask",emits:["click"],props:{show:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:""},customStyle:{type:Object,default:()=>({})},zoom:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},maskClickAble:{type:Boolean,default:!0},blur:{type:[Number,String],default:0}},data:()=>({zoomStyle:{transform:""},scale:"scale(1.2, 1.2)"}),watch:{show(e){e&&this.zoom?this.zoomStyle.transform="scale(1, 1)":!e&&this.zoom&&(this.zoomStyle.transform=this.scale)}},computed:{maskStyle(){let e={backgroundColor:"rgba(0, 0, 0, 0.6)"};return this.show?e.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.mask:e.zIndex=-1,e.transition=`all ${this.duration/1e3}s ease-in-out`,Object.keys(this.customStyle).length&&(e={...e,...this.customStyle}),e},filterStyle(){let{blur:e}=this,t={};return e&&(t.backdropFilter=`blur(${e}rpx)`),t}},methods:{click(){this.maskClickAble&&this.$emit("click")}}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-mask",{"u-mask-zoom":i.zoom,"u-mask-show":i.show}]),"hover-stop-propagation":"",style:e.normalizeStyle([s.maskStyle,o.zoomStyle,s.filterStyle]),onClick:a[0]||(a[0]=(...e)=>s.click&&s.click(...e)),onTouchmove:a[1]||(a[1]=e.withModifiers((()=>{}),["stop","prevent"]))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],38)}],["__scopeId","data-v-2945a853"]]);const O=a({name:"u-popup",emits:["update:modelValue","input","open","close"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},show:{type:Boolean,default:!1},mode:{type:String,default:"left"},mask:{type:Boolean,default:!0},length:{type:[Number,String],default:"auto"},zoom:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},customStyle:{type:Object,default:()=>({})},popup:{type:Boolean,default:!0},borderRadius:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"close"},closeIconPos:{type:String,default:"top-right"},closeIconColor:{type:String,default:"#909399"},closeIconSize:{type:[String,Number],default:"30"},width:{type:String,default:""},height:{type:String,default:""},negativeTop:{type:[String,Number],default:0},maskCustomStyle:{type:Object,default:()=>({})},duration:{type:[String,Number],default:250},blur:{type:[String,Number],default:0}},data:()=>({visibleSync:!1,showDrawer:!1,timer:null,closeFromInner:!1}),computed:{valueCom(){return this.modelValue},style(){let e={};if("left"==this.mode||"right"==this.mode?e={width:this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),height:"100%",transform:`translate3D(${"left"==this.mode?"-100%":"100%"},0px,0px)`}:"top"!=this.mode&&"bottom"!=this.mode||(e={width:"100%",height:this.height?this.getUnitValue(this.height):this.getUnitValue(this.length),transform:`translate3D(0px,${"top"==this.mode?"-100%":"100%"},0px)`}),e.zIndex=this.uZindex,this.borderRadius){switch(this.mode){case"left":e.borderRadius=`0 ${this.borderRadius}rpx ${this.borderRadius}rpx 0`;break;case"top":e.borderRadius=`0 0 ${this.borderRadius}rpx ${this.borderRadius}rpx`;break;case"right":e.borderRadius=`${this.borderRadius}rpx 0 0 ${this.borderRadius}rpx`;break;case"bottom":e.borderRadius=`${this.borderRadius}rpx ${this.borderRadius}rpx 0 0`}e.overflow="hidden"}return this.duration&&(e.transition=`all ${this.duration/1e3}s linear`),e},centerStyle(){let e={};return e.width=this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),e.height=this.height?this.getUnitValue(this.height):"auto",e.zIndex=this.uZindex,e.marginTop=`-${this.$u.addUnit(this.negativeTop)}`,this.borderRadius&&(e.borderRadius=`${this.borderRadius}rpx`,e.overflow="hidden"),e},uZindex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},watch:{valueCom:{immediate:!0,handler(e){e?this.open():this.closeFromInner||this.close(),this.closeFromInner=!1}}},mounted(){this.valueCom&&this.open()},methods:{getUnitValue:e=>/(%|px|rpx|auto)$/.test(e)?e:e+"rpx",maskClick(){this.close()},close(){this.closeFromInner=!0,this.change("showDrawer","visibleSync",!1)},modeCenterClose(e){"center"==e&&this.maskCloseAble&&this.close()},open(){this.change("visibleSync","showDrawer",!0)},change(e,t,a){1==this.popup&&(this.$emit("input",a),this.$emit("update:modelValue",a)),this[e]=a,a?this.$nextTick((()=>{this[t]=a,this.$emit(a?"open":"close")})):this.timer=setTimeout((()=>{this[t]=a,this.$emit(a?"open":"close")}),this.duration)}}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-mask"),j),d=o(e.resolveDynamicComponent("u-icon"),i);return n.visibleSync?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle([l.customStyle,{zIndex:r.uZindex-1}]),class:"u-drawer","hover-stop-propagation":""},[e.createVNode(c,{blur:l.blur,duration:l.duration,"custom-style":l.maskCustomStyle,maskClickAble:l.maskCloseAble,"z-index":r.uZindex-2,show:n.showDrawer&&l.mask,onClick:r.maskClick},null,8,["blur","duration","custom-style","maskClickAble","z-index","show","onClick"]),e.createElementVNode("view",{class:e.normalizeClass(["u-drawer-content",[l.safeAreaInsetBottom?"safe-area-inset-bottom":"","u-drawer-"+l.mode,n.showDrawer?"u-drawer-content-visible":"",l.zoom&&"center"==l.mode?"u-animation-zoom":""]]),onClick:a[3]||(a[3]=e=>r.modeCenterClose(l.mode)),onTouchmove:a[4]||(a[4]=e.withModifiers((()=>{}),["stop","prevent"])),style:e.normalizeStyle([r.style])},["center"==l.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-mode-center-box",onClick:a[0]||(a[0]=e.withModifiers((()=>{}),["stop","prevent"])),onTouchmove:a[1]||(a[1]=e.withModifiers((()=>{}),["stop","prevent"])),style:e.normalizeStyle([r.centerStyle])},[l.closeable?(e.openBlock(),e.createBlock(d,{key:0,onClick:r.close,class:e.normalizeClass(["u-close",["u-close--"+l.closeIconPos]]),name:l.closeIcon,color:l.closeIconColor,size:l.closeIconSize},null,8,["onClick","class","name","color","size"])):e.createCommentVNode("",!0),e.createElementVNode("scroll-view",{class:"u-drawer__scroll-view","scroll-y":"true"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])],36)):(e.openBlock(),e.createElementBlock("scroll-view",{key:1,class:"u-drawer__scroll-view","scroll-y":"true"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])),e.createElementVNode("view",{onClick:a[2]||(a[2]=(...e)=>r.close&&r.close(...e)),class:e.normalizeClass(["u-close",["u-close--"+l.closeIconPos]])},["center"!=l.mode&&l.closeable?(e.openBlock(),e.createBlock(d,{key:0,name:l.closeIcon,color:l.closeIconColor,size:l.closeIconSize},null,8,["name","color","size"])):e.createCommentVNode("",!0)],2)],38)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-50ce0036"]]);const M=a({emits:["update:modelValue","input","confirm","cancel"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},border:{type:Boolean,default:!0},cancelColor:{type:String,default:"#606266"},confirmColor:{type:String,default:"#19be6b"},zIndex:{type:[String,Number],default:0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[0]},isDefaultSelect:{type:Boolean,default:!1},defaultSelectValue:{type:[String,Number,Array],default:""},mode:{type:String,default:"single-column"},valueName:{type:String,default:"value"},labelName:{type:String,default:"label"},childName:{type:String,default:"children"},title:{type:String,default:""},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"},blur:{type:[Number,String],default:0}},data:()=>({popupValue:!1,defaultSelector:[0],columnData:[],selectValue:[],lastSelectIndex:[],columnNum:0,moving:!1}),watch:{value:{immediate:!0,handler(e){e&&setTimeout((()=>this.init()),10),this.popupValue=e}},modelValue:{immediate:!0,handler(e){e&&setTimeout((()=>this.init()),10),this.popupValue=e}}},computed:{uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},created(){},methods:{pickstart(){},pickend(){},init(){this.setColumnNum(),this.setDefaultSelector(),this.setColumnData(),this.setSelectValue()},getColumnIndex(e,t,a,i){let l=0;if(t[i]&&t.length>i){let a=t[i];l=e.findIndex((e=>e[this.valueName]==a))}if(l>=0){let o=e[l];a.push(l),i++;let s=o.children;s&&s.length>0&&this.getColumnIndex(s,t,a,i)}},setDefaultSelector(){if(this.isDefaultSelect)if("single-column"==this.mode){let e=this.list.findIndex((e=>this.defaultSelectValue==e[this.valueName]));this.defaultSelector=[e]}else if("mutil-column-auto"==this.mode){let e=0,t=[];this.getColumnIndex(this.list,this.defaultSelectValue,t,e),this.defaultSelector=t}else{let e=[];this.list.forEach(((t,a)=>{let i=t.findIndex((e=>this.defaultSelectValue.length>=a&&this.defaultSelectValue[a]==e[this.valueName]));i<0&&(i=0),e.push(i)})),this.defaultSelector=e}else this.defaultSelector=this.defaultValue.length==this.columnNum?this.defaultValue:Array(this.columnNum).fill(0);this.lastSelectIndex=this.$u.deepClone(this.defaultSelector)},setColumnNum(){if("single-column"==this.mode)this.columnNum=1;else if("mutil-column"==this.mode)this.columnNum=this.list.length;else if("mutil-column-auto"==this.mode){let e=1,t=this.list;for(;t[0]&&t[0][this.childName]&&t[0][this.childName].length>0;)t[0]&&t[0][this.childName].length>0?(t=t[0][this.childName],e++):t={};this.columnNum=e}},setColumnData(){let e=[];if(this.selectValue=[],"mutil-column-auto"==this.mode){let t=this.list[this.defaultSelector.length?this.defaultSelector[0]:0];for(let a=0;a<this.columnNum;a++)0==a?(e[a]=this.list,t=t[this.childName]):t&&(e[a]=t,t.length>0&&(t=t[0][this.childName]))}else"single-column"==this.mode?e[0]=this.list:e=this.list;this.columnData=e},setSelectValue(){let e=null;for(let t=0;t<this.columnNum;t++){-1==this.defaultSelector[t]&&(this.defaultSelector[t]=0),e=this.columnData[t][this.defaultSelector[t]];let a={value:e?e[this.valueName]:"",label:e?e[this.labelName]:""};e&&e.extra&&(a.extra=e.extra),a.index=this.defaultSelector[t],this.selectValue.push(a)}},selectIndex(e){let t=null;if(this.selectValue=[],"mutil-column-auto"==this.mode){this.lastSelectIndex.map(((a,i)=>{a!=e[i]&&(t=i)})),this.defaultSelector=e;for(let a=t+1;a<this.columnNum;a++)this.columnData[a]=this.columnData[a-1][a-1==t?e[t]:0][this.childName],this.defaultSelector[a]=0;e.map(((t,a)=>{let i=this.columnData[a][e[a]],l={value:i?i[this.valueName]:null,label:i?i[this.labelName]:null};i&&void 0!==i.extra&&(l.extra=i.extra),l.index=e[a],this.selectValue.push(l)})),this.lastSelectIndex=e}else if("single-column"==this.mode){let t=this.columnData[0][e[0]],a={value:t?t[this.valueName]:null,label:t?t[this.labelName]:null};t&&void 0!==t.extra&&(a.extra=t.extra),a.index=e[0],this.selectValue.push(a)}else"mutil-column"==this.mode&&e.map(((t,a)=>{let i=this.columnData[a][e[a]],l={value:i?i[this.valueName]:null,label:i?i[this.labelName]:null};i&&void 0!==i.extra&&(l.extra=i.extra),l.index=e[a],this.selectValue.push(l)}))},columnChange(e){let t=e.detail.value;this.selectIndex(t)},close(){this.$emit("input",!1),this.$emit("update:modelValue",!1)},getResult(e=null){e&&this.$emit(e,this.selectValue),this.close()},selectHandler(){this.$emit("click")}}},[["render",function(t,a,i,l,s,n){const r=o(e.resolveDynamicComponent("u-popup"),O);return e.openBlock(),e.createElementBlock("view",{class:"u-select"},[e.createVNode(r,{blur:i.blur,maskCloseAble:i.maskCloseAble,mode:"bottom",popup:!1,modelValue:s.popupValue,"onUpdate:modelValue":a[7]||(a[7]=e=>s.popupValue=e),length:"auto",safeAreaInsetBottom:i.safeAreaInsetBottom,onClose:n.close,"z-index":n.uZIndex},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"u-select"},[e.createElementVNode("view",{class:"u-select__header",onTouchmove:a[3]||(a[3]=e.withModifiers((()=>{}),["stop","prevent"]))},[e.createElementVNode("view",{class:"u-select__header__cancel u-select__header__btn",style:e.normalizeStyle({color:i.cancelColor}),"hover-class":"u-hover-class","hover-stay-time":150,onClick:a[0]||(a[0]=e=>n.getResult("cancel"))},e.toDisplayString(i.cancelText),5),e.createElementVNode("view",{class:"u-select__header__title"},e.toDisplayString(i.title),1),e.createElementVNode("view",{class:"u-select__header__confirm u-select__header__btn",style:e.normalizeStyle({color:s.moving?i.cancelColor:i.confirmColor}),"hover-class":"u-hover-class","hover-stay-time":150,onTouchmove:a[1]||(a[1]=e.withModifiers((()=>{}),["stop"])),onClick:a[2]||(a[2]=e.withModifiers((e=>n.getResult("confirm")),["stop"]))},e.toDisplayString(i.confirmText),37)],32),e.createElementVNode("view",{class:"u-select__body"},[e.createElementVNode("picker-view",{onChange:a[4]||(a[4]=(...e)=>n.columnChange&&n.columnChange(...e)),class:"u-select__body__picker-view",value:s.defaultSelector,onPickstart:a[5]||(a[5]=(...e)=>n.pickstart&&n.pickstart(...e)),onPickend:a[6]||(a[6]=(...e)=>n.pickend&&n.pickend(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.columnData,((t,a)=>(e.openBlock(),e.createElementBlock("picker-view-column",{key:a},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-select__body__picker-view__item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(t[i.labelName]),1)])))),128))])))),128))],40,["value"])])])])),_:1},8,["blur","maskCloseAble","modelValue","safeAreaInsetBottom","onClose","z-index"])])}],["__scopeId","data-v-b4be62ff"]]),F={name:"",shape:"",disabled:"",labelDisabled:"",activeColor:"",inactiveColor:"",iconSize:"",labelSize:"",label:"",labelColor:"",size:"",iconColor:"",placement:""};const U=a({name:"u-radio",mixins:[{props:{name:{type:[String,Number,Boolean],default:F.name},shape:{type:String,default:F.shape},disabled:{type:[String,Boolean],default:F.disabled},labelDisabled:{type:[String,Boolean],default:F.labelDisabled},activeColor:{type:String,default:F.activeColor},inactiveColor:{type:String,default:F.inactiveColor},iconColor:{type:String,default:F.iconColor},iconSize:{type:[String,Number],default:F.iconSize},labelSize:{type:[String,Number],default:F.labelSize},label:{type:[String,Number],default:F.label},size:{type:[String,Number],default:F.size},color:{type:String,default:F.color},customStyle:{type:Object,default:{}},labelColor:{type:String,default:F.labelColor},isImg:{type:Boolean,default:!1},activeImg:{type:String,default:""},img:{type:String,default:""}}}],data:()=>({checked:!1,parentData:{iconSize:18,labelDisabled:null,disabled:null,shape:null,activeColor:null,inactiveColor:null,size:18,value:null,iconColor:null,placement:"row",borderBottom:!1,iconPlacement:"left"}}),computed:{elDisabled(){return""!==this.disabled?this.disabled:null!==this.parentData.disabled&&this.parentData.disabled},elLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:null!==this.parentData.labelDisabled&&this.parentData.labelDisabled},elSize(){return this.size?this.size:this.parentData.size?this.parentData.size:21},elIconSize(){return this.iconSize?this.iconSize:this.parentData.iconSize?this.parentData.iconSize:12},elActiveColor(){return this.activeColor?this.activeColor:this.parentData.activeColor?this.parentData.activeColor:"#2979ff"},elInactiveColor(){return this.inactiveColor?this.inactiveColor:this.parentData.inactiveColor?this.parentData.inactiveColor:"#c8c9cc"},elLabelColor(){return this.labelColor?this.labelColor:this.parentData.labelColor?this.parentData.labelColor:"#606266"},elShape(){return this.shape?this.shape:this.parentData.shape?this.parentData.shape:"circle"},elLabelSize(){let e=this.labelSize?this.labelSize:this.parentData.labelSize;return e?uni.$u.addUnit(e+"px"):"inherit"},elIconColor(){const e=this.iconColor?this.iconColor:this.parentData.iconColor?this.parentData.iconColor:"#ffffff";return this.elDisabled?this.checked?this.elInactiveColor:"transparent":this.checked?e:"transparent"},iconClasses(){let e=[];return e.push("u-radio__icon-wrap--"+this.elShape),this.elDisabled&&e.push("u-radio__icon-wrap--disabled"),this.checked&&this.elDisabled&&e.push("u-radio__icon-wrap--disabled--checked"),e},iconWrapStyle(){const e={};return e.backgroundColor=this.checked&&!this.elDisabled?this.elActiveColor:"#ffffff",e.borderColor=this.checked&&!this.elDisabled?this.elActiveColor:this.elInactiveColor,e.width=uni.$u.addUnit(this.elSize+"px"),e.height=uni.$u.addUnit(this.elSize+"px"),"right"===this.parentData.iconPlacement&&(e.marginRight=0),e},radioStyle(){const e={};return this.parentData.borderBottom&&"row"===this.parentData.placement&&uni.$u.error("检测到您将borderBottom设置为true，需要同时将u-radio-group的placement设置为column才有效"),this.parentData.borderBottom&&"column"===this.parentData.placement&&(e.paddingBottom="ios"===uni.$u.os()?"12px":"8px"),uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},created(){this.init()},methods:{init(){this.updateParentData(),this.parent||uni.$u.error("u-radio必须搭配u-radio-group组件使用"),this.checked=this.name===this.parentData.value},updateParentData(){this.getParentData("u-radio-group")},iconClickHandler(e){this.preventEvent(e),this.elDisabled||this.setRadioCheckedStatus()},wrapperClickHandler(e){"right"===this.parentData.iconPlacement&&this.iconClickHandler(e)},labelClickHandler(e){this.preventEvent(e),this.elLabelDisabled||this.elDisabled||this.setRadioCheckedStatus()},emitEvent(){this.checked||this.$emit("change",this.name)},setRadioCheckedStatus(){this.emitEvent(),this.checked=!0,"function"==typeof this.parent.unCheckedOther&&this.parent.unCheckedOther(this)}}},[["render",function(t,a,l,s,n,r){const c=o(e.resolveDynamicComponent("u-icon"),i);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-radio",[`u-radio-label--${n.parentData.iconPlacement}`,n.parentData.borderBottom&&"column"===n.parentData.placement&&"u-border-bottom"]]),onClick:a[3]||(a[3]=e.withModifiers(((...e)=>r.wrapperClickHandler&&r.wrapperClickHandler(...e)),["stop"])),style:e.normalizeStyle([r.radioStyle])},[t.activeImg&&t.img?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["u-radio__image-wrap",r.iconClasses]),onClick:a[0]||(a[0]=e.withModifiers(((...e)=>r.iconClickHandler&&r.iconClickHandler(...e)),["stop"]))},[e.createElementVNode("image",{class:"u-radio__image-wrap_img",style:e.normalizeStyle({width:t.$u.addUnit(2*r.elIconSize),height:t.$u.addUnit(2*r.elIconSize)}),src:n.checked?t.activeImg:t.img},null,12,["src"])],2)):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["u-radio__icon-wrap",r.iconClasses]),onClick:a[1]||(a[1]=e.withModifiers(((...e)=>r.iconClickHandler&&r.iconClickHandler(...e)),["stop"])),style:e.normalizeStyle([r.iconWrapStyle])},[e.renderSlot(t.$slots,"icon",{},(()=>[e.createVNode(c,{class:"u-radio__icon-wrap__icon",name:"checkbox-mark",size:r.elIconSize,color:r.elIconColor},null,8,["size","color"])]),!0)],6)),e.createElementVNode("view",{class:"u-radio__label",onClick:a[2]||(a[2]=e.withModifiers(((...e)=>r.labelClickHandler&&r.labelClickHandler(...e)),["stop"])),style:e.normalizeStyle({color:r.elDisabled?r.elInactiveColor:r.elLabelColor,fontSize:r.elLabelSize,lineHeight:r.elLabelSize})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)],6)}],["__scopeId","data-v-f8cc1966"]]);let L="";const R=a({name:"u-radio-group",mixins:[n,{props:{value:{type:[String,Number,Boolean],default:L},modelValue:{type:[String,Number,Boolean],default:L},disabled:{type:Boolean,default:!1},shape:{type:String,default:"circle"},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#c8c9cc"},name:{type:String,default:""},size:{type:[String,Number],default:18},placement:{type:String,default:"row"},label:{type:[String],default:""},labelColor:{type:[String],default:"#303133"},labelSize:{type:[String,Number],default:14},labelDisabled:{type:Boolean,default:!1},iconColor:{type:String,default:"#ffffff"},iconSize:{type:[String,Number],default:18},borderBottom:{type:Boolean,default:!1},iconPlacement:{type:String,default:"left"},customStyle:{type:Object,default:{}}}}],computed:{parentData(){return[this.value,this.modelValue,this.disabled,this.inactiveColor,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.borderBottom,this.placement]},bemClass(){return this.bem("radio-group",["placement"])}},watch:{parentData(){this.children.length&&this.children.map((e=>{"function"==typeof e.init&&e.init()}))}},data:()=>({}),created(){this.children=[]},methods:{unCheckedOther(e){this.children.map((t=>{e!==t&&(t.checked=!1)}));const{name:t}=e;this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),60)}}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-radio-group",s.bemClass])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],2)}],["__scopeId","data-v-97ca7efc"]]);const q=a({data:()=>({userInfo:{},globalOption:{},globalData:{},adduser:{msg:"",status:0,success:!0,data:{}},logout:{msg:"",status:0,success:!0,data:{}},onlogin:{msg:"",status:0,success:!0,data:{info:{user_id:0,is_admin:0,num:0}}},aidraw:{msg:"",status:0,success:!0,data:{}},aivideo:{msg:"提交成功！",status:0,success:!0,data:{}},aivideo_pic:{msg:"",status:0,success:!0,data:{}},addnum:{msg:"",status:0,success:!0,data:{}},headerBackgroundStyle:{background:"none !important"},swipersIndex:0,modal4:"",modal2:"",prompt:"",negative_prompt:"",image:"",image_fidelity:0,showAspect_ratio:!1,aspect_ratioDatas:[{value:"16:9",label:"16:9"},{value:"9:16",label:"9:16"},{value:"1:1",label:"1:1"},{value:"3:2",label:"3:2"},{value:"2:3",label:"2:3"}],aspect_ratio:"16:9",modal1:"",prompt1:"",negative_prompt1:"",cfg_scale1:0,showMode1:!1,mode1Datas:[{value:"std",label:"std（高性能）"},{value:"pro",label:"pro（高表现）"}],mode1:"std",showCamera_control_type1:!1,camera_control_type1Datas:[{value:"down_back",label:"镜头下压并后退 ➡️ 下移拉远"},{value:"forward_up",label:"镜头前进并上仰 ➡️ 推进上移"},{value:"right_turn_forward",label:"先右旋转后前进 ➡️ 右旋推进"},{value:"left_turn_forward",label:"先左旋并前进 ➡️ 左旋推进"}],camera_control_type1:"down_back",showAspect_ratio1:!1,aspect_ratio1Datas:[{value:"16:9",label:"16:9"},{value:"9:16",label:"9:16"},{value:"1:1",label:"1:1"},{value:"3:2",label:"3:2"},{value:"2:3",label:"2:3"}],aspect_ratio1:"16:9",duration1Datas:[{value:"5",label:"5秒",checked:!0},{value:"10",label:"10秒",checked:!1}],duration1:"5",modal3:"",image3:"",image_tail3:"",prompt3:"",negative_prompt3:"",cfg_scale3:0,showMode3:!1,mode3Datas:[{value:"std",label:"std（高性能）"},{value:"pro",label:"pro（高表现）"}],mode3:"std",duration3Datas:[{value:"5",label:"5秒",checked:!0},{value:"10",label:"10秒",checked:!1}],duration3:"5",modal:"",usernameFocus:!1,username:"",passwordFocus:!1,password:"",modal5:"",addnum_inputFocus:!1,addnum_input:"",showNum:!1,numDatas:[{value:"100",label:"10元"},{value:"500",label:"50元"},{value:"1000",label:"100元"},{value:"2000",label:"200元"}],num:"100"}),onPageScroll(e){const t=e.scrollTop;if(this.headerBackgroundStyle=this.headerBackgroundStyle||{background:"none"},t<=80){const e=`rgba(255, 255, 255, ${t/100})`;this.headerBackgroundStyle.background=e}else this.headerBackgroundStyle.background="#ffffff"},onShow(){this.setCurrentPage(this),this.initShow()},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){},async initShow(){await this.onloginApi({refresh:1})},async adduserApi(e){let t={username:(e=e||{}).username||this.username||"new_user",password:e.password||this.password||"new_user"},a=await this.$http.post("/adduser",t,{},"json");this.adduser=a,0==a.status?(await this.showModal("添加成功！"),this.navigateTo({type:"closemodal",id:"modal"})):await this.showModal("出现错误！"+a.msg)},async logoutApi(e){let t=await this.$http.post("/logout",{},{},"json");this.logout=t,this.navigateTo({type:"page",url:"login"})},async onloginApi(e){let t=await this.$http.post("/onlogin",{},{},"json");this.onlogin=t,0!=t.status&&(this.navigateTo({type:"tip",tip:"未登录"}),this.navigateTo({type:"page",url:"login"})),this.$session.setUser(t.data.info)},async aidrawApi(e){let t={prompt:(e=e||{}).prompt||this.prompt,negative_prompt:e.negative_prompt||this.negative_prompt,image:e.image||this.image,image_fidelity:e.image_fidelity||this.image_fidelity,aspect_ratio:e.aspect_ratio||this.aspect_ratio};uni.showLoading({mask:!0,title:"加载中"});let a=await this.$http.post("/keling/aidraw",t,{},"json");this.aidraw=a,uni.hideLoading(),0==a.status?(await this.showModal("提交成功，请稍后到任务管理页查看详情"),this.navigateTo({type:"closemodal",id:"modal2"})):await this.showModal("提交失败，请稍后再试。错误："+a.msg)},async aivideoApi(e){let t={prompt:(e=e||{}).prompt||this.prompt1,negative_prompt:e.negative_prompt||this.negative_prompt1,cfg_scale:e.cfg_scale||this.cfg_scale1,mode:e.mode||this.mode1,camera_control_type:e.camera_control_type||this.camera_control_type1,aspect_ratio:e.aspect_ratio||this.aspect_ratio1,duration:e.duration||this.duration1};uni.showLoading({mask:!0,title:"加载中"});let a=await this.$http.post("/keling/aivideo",t,{},"json");this.aivideo=a,uni.hideLoading(),0==a.status?(await this.showModal("提交成功，请稍后到任务管理页查看详情"),this.navigateTo({type:"closemodal",id:"modal1"})):await this.showModal("提交失败，请稍后再试。错误："+a.msg)},async aivideo_picApi(e){let t={prompt:(e=e||{}).prompt||this.prompt3,negative_prompt:e.negative_prompt||this.negative_prompt3,cfg_scale:e.cfg_scale||this.cfg_scale3,mode:e.mode||this.mode3,duration:e.duration||this.duration3,image:e.image||this.image3,image_tail:e.image_tail||this.image_tail3};uni.showLoading({mask:!0,title:"加载中"});let a=await this.$http.post("/keling/aivideo_pic",t,{},"json");this.aivideo_pic=a,uni.hideLoading(),0==a.status?(await this.showModal("提交成功，请稍后到任务管理页查看详情"),this.navigateTo({type:"closemodal",id:"modal1"})):await this.showModal("提交失败，请稍后再试。错误："+a.msg)},async addnumApi(e){let t={username:(e=e||{}).username||this.addnum_input||"new_user",num:e.num||this.num||"new_user"},a=await this.$http.post("/addnum",t,{},"json");this.addnum=a,0==a.status?(await this.showModal("添加成功！"),this.navigateTo({type:"closemodal",id:"modal"})):await this.showModal("出现错误！"+a.msg)},async file_callbackFunction(e){},changeSwipers(e){let t=e.detail.current;this.setData({swipersIndex:t})},stopCloseModal4(e){e.stopPropagation()},closeModal4(){this.modal4=""},changeImage(e,t){this.$nextTick((()=>{this.navigateTo({type:"file_callbackFunction"})}))},delImage(e,t){this.changeImage(e,t)},uploadImage(e,t,a){this.changeImage(t,a)},changeImage_fidelity(e){},changeAspect_ratio(e){e.map(((e,t)=>{this.aspect_ratio=e.value}))},changeCfg_scale1(e){},changeMode1(e){e.map(((e,t)=>{this.mode1=e.value}))},changeCamera_control_type1(e){e.map(((e,t)=>{this.camera_control_type1=e.value}))},changeAspect_ratio1(e){e.map(((e,t)=>{this.aspect_ratio1=e.value}))},changeImage3(e,t){},delImage3(e,t){this.changeImage3(e,t)},uploadImage3(e,t,a){this.changeImage3(t,a)},changeImage_tail3(e,t){},delImage_tail3(e,t){this.changeImage_tail3(e,t)},uploadImage_tail3(e,t,a){this.changeImage_tail3(t,a)},changeCfg_scale3(e){},changeMode3(e){e.map(((e,t)=>{this.mode3=e.value}))},changeNum(e){e.map(((e,t)=>{this.num=e.value}))}}},[["render",function(t,a,i,l,s,n){const c=o(e.resolveDynamicComponent("u-navbar"),D),d=o(e.resolveDynamicComponent("u-input"),r),u=o(e.resolveDynamicComponent("u-form-item"),E),p=o(e.resolveDynamicComponent("u-upload"),A),m=o(e.resolveDynamicComponent("u-slider"),I),h=o(e.resolveDynamicComponent("diy-selectinput"),P),g=o(e.resolveDynamicComponent("u-select"),M),f=o(e.resolveDynamicComponent("u-radio"),U),y=o(e.resolveDynamicComponent("u-radio-group"),R);return e.openBlock(),e.createElementBlock("view",{class:"container container333415"},[e.createVNode(c,{isSlot:!0,isFixed:!1,isMarginRight:!1,borderBottom:!1,background:s.headerBackgroundStyle,title:"",backTextStyle:{color:"inherit"},backIconColor:"#fff",titleColor:"inherit",isHome:!1,isBack:!1},{default:e.withCtx((()=>[e.createElementVNode("view",{background:s.headerBackgroundStyle,class:"flex align-center diygw-text-md text-bold align-center flex-nowrap diygw-col-24 justify-between items-center"},[e.createElementVNode("image",{src:"/static/banner-blue.png",class:"response diygw-col-7 image10-clz",mode:"widthFix"}),e.withDirectives(e.createElementVNode("button",{onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"openmodal","data-id":"modal4",class:"diygw-col-6 btn-clz diygw-btn-default"},"管理员功能",512),[[e.vShow,"1"==s.userInfo.is_admin]]),e.createElementVNode("button",{onClick:a[1]||(a[1]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"logoutApi",class:"diygw-col-6 btn1-clz diygw-btn-default"},"退出登录")],8,["background"])])),_:1},8,["background"]),e.createElementVNode("view",{class:"flex swipers diygw-col-24 swipers-clz"},[e.createElementVNode("swiper",{current:s.swipersIndex,class:"swiper swiper-indicator_rect_radius",onChange:a[2]||(a[2]=(...e)=>n.changeSwipers&&n.changeSwipers(...e)),"indicator-color":"rgba(51, 51, 51, 0.39)","indicator-active-color":"rgba(64, 64, 64, 0.93)","indicator-dots":"true",autoplay:"",interval:"3000",circular:"true",style:{height:"240rpx"}},[e.createElementVNode("swiper-item",{class:"diygw-swiper-item"},[e.createElementVNode("view",{class:"diygw-swiper-item-wrap flex flex-direction-column"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column justify-center flex2-clz"},[e.createElementVNode("text",{class:"diygw-col-24 text4-clz"}," 一颗优雅草科技 "),e.createElementVNode("text",{class:"diygw-col-24"}," 开启全新AI探索之旅 ")])])]),e.createElementVNode("swiper-item",{class:"diygw-swiper-item"},[e.createElementVNode("view",{class:"diygw-swiper-item-wrap flex flex-direction-column"})]),e.createElementVNode("swiper-item",{class:"diygw-swiper-item"},[e.createElementVNode("view",{class:"diygw-swiper-item-wrap flex flex-direction-column"})])],40,["current"])]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex20-clz"},[e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex27-clz",onClick:a[3]||(a[3]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"openmodal","data-id":"modal1"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex28-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text30-clz"}," AI文生视频 "),e.createElementVNode("text",{class:"diygw-col-0 text31-clz"}," 文生视频 ")]),e.createElementVNode("image",{src:"/static/g001.png",class:"image3-size diygw-image diygw-col-0",mode:"widthFix"})]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex33-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex34-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text33-clz"}," VEO2 "),e.createElementVNode("text",{class:"diygw-col-0 text34-clz"}," 谷歌VEO2 ")]),e.createElementVNode("image",{src:"/static/g003.png",class:"image4-size diygw-image diygw-col-0",mode:"widthFix"})]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex52-clz",onClick:a[4]||(a[4]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"openmodal","data-id":"modal2"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex53-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text41-clz"}," AI生图 "),e.createElementVNode("text",{class:"diygw-col-0 text42-clz"}," 文/图生图 ")]),e.createElementVNode("image",{src:"/static/g002.png",class:"image15-size diygw-image diygw-col-0",mode:"widthFix"})]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex4-clz",onClick:a[5]||(a[5]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"openmodal","data-id":"modal3"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex5-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text5-clz"}," AI图生视频 "),e.createElementVNode("text",{class:"diygw-col-0 text6-clz"}," 图生视频 ")]),e.createElementVNode("image",{src:"/static/g002.png",class:"image1-size diygw-image diygw-col-0",mode:"widthFix"})]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex1-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex3-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text2-clz"}," 预留位置 "),e.createElementVNode("text",{class:"diygw-col-0 text3-clz"}," 预留位置 ")]),e.createElementVNode("image",{src:"/static/g002.png",class:"image-size diygw-image diygw-col-0",mode:"widthFix"})]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex8-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex9-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text11-clz"}," 预留位置 "),e.createElementVNode("text",{class:"diygw-col-0 text12-clz"}," 预留位置 ")]),e.createElementVNode("image",{src:"/static/g002.png",class:"image6-size diygw-image diygw-col-0",mode:"widthFix"})]),e.createElementVNode("view",{class:"flex diygw-col-24 flex-direction-column items-center flex-nowrap flex26-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 items-center flex30-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text32-clz"}," 进度管理 ")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-center items-center flex36-clz",onClick:a[6]||(a[6]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/tasks"},[e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-0"}," 查看进度 ")])])]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-center items-center"},[e.createElementVNode("text",{class:"flex icon diygw-col-0 diy-icon-title"}),e.createElementVNode("text",{onClick:a[7]||(a[7]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"href","data-url":"https://www.youyacao.com",class:"diygw-col-0"}," 一颗优雅草科技 提供独家技术支持 "),e.createElementVNode("text",{onClick:a[8]||(a[8]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"href","data-url":"https://www.youyacao.com",class:"diygw-col-0"}," 本产品仅供代理商和优雅草科技内部使用 ")]),s.modal4?(e.openBlock(),e.createElementBlock("view",{key:0,onTouchmove:a[14]||(a[14]=e.withModifiers((()=>{}),["stop","prevent"])),onClick:a[15]||(a[15]=e.withModifiers(((...e)=>n.closeModal4&&n.closeModal4(...e)),["stop","prevent"])),class:e.normalizeClass(["diygw-modal drawer-left-modal",s.modal4]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{onClick:a[13]||(a[13]=e.withModifiers(((...e)=>n.stopCloseModal4&&n.stopCloseModal4(...e)),["stop","prevent"])),class:"diygw-dialog diygw-dialog-modal4 basis-lg"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"}," 管理员专区 "),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal4",onClick:a[9]||(a[9]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content"},[e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex6-clz",onClick:a[10]||(a[10]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"openmodal","data-id":"modal5"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex7-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text9-clz"}," 添加次数 "),e.createElementVNode("text",{class:"diygw-col-0 text10-clz"}," 用户加次数 ")])]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex37-clz",onClick:a[11]||(a[11]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"openmodal","data-id":"modal"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex39-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text38-clz"}," 添加账号 "),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-0 text39-clz"}," 管理员专用 ")])]),e.createElementVNode("view",{class:"flex diygw-col-12 items-center flex-nowrap flex10-clz",onClick:a[12]||(a[12]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/admin_tasks"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-0 flex-direction-column flex11-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text14-clz"}," 任务管理 "),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-0 text15-clz"}," 管理员专用 ")])])])])])],34)):e.createCommentVNode("",!0),s.modal2?(e.openBlock(),e.createElementBlock("view",{key:1,onTouchmove:a[25]||(a[25]=e.withModifiers((()=>{}),["stop","prevent"])),class:e.normalizeClass(["diygw-modal bottom-modal",s.modal2]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{class:"diygw-dialog diygw-dialog-modal2"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"}," 可灵AI生成图片 "),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal2",onClick:a[16]||(a[16]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content"},[e.createVNode(u,{class:"diygw-col-24",label:"正向提示词",prop:"prompt"},{default:e.withCtx((()=>[e.createVNode(d,{maxlength:"200",height:"60px",class:"",placeholder:"正向文本提示，必须，不能超过500个字符",modelValue:s.prompt,"onUpdate:modelValue":a[17]||(a[17]=e=>s.prompt=e),type:"textarea"},null,8,["modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"负向提示词",prop:"negative_prompt"},{default:e.withCtx((()=>[e.createVNode(d,{maxlength:"200",height:"60px",class:"",placeholder:"负向文本提示，可空，不能超过200个字符",modelValue:s.negative_prompt,"onUpdate:modelValue":a[18]||(a[18]=e=>s.negative_prompt=e),type:"textarea"},null,8,["modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"图片上传",prop:"image"},{default:e.withCtx((()=>[e.createVNode(p,{width:"160",height:"160",margin:"0",maxCount:"1",onOnSuccess:n.uploadImage,onOnRemove:n.delImage,action:"http://127.0.0.1/upload",modelValue:s.image,"onUpdate:modelValue":a[19]||(a[19]=e=>s.image=e)},null,8,["onOnSuccess","onOnRemove","modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"图片参考度",prop:"image_fidelity"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"flex1 flex align-center diygw-col-24"},[e.createVNode(m,{class:"flex1","active-color":"#07c160",blockWidth:"50",onChange:n.changeImage_fidelity,name:"image_fidelity",modelValue:s.image_fidelity,"onUpdate:modelValue":a[20]||(a[20]=e=>s.image_fidelity=e),min:0,max:1,step:.1},null,8,["onChange","modelValue","step"])])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"纵横比",prop:"aspect_ratio"},{default:e.withCtx((()=>[e.createVNode(h,{onClick:a[21]||(a[21]=e=>s.showAspect_ratio=!0),class:"diygw-col-24",valueName:"value",labelName:"label",list:s.aspect_ratioDatas,placeholder:"选择纵横比，16:9, 9:16, 1:1, 4:3, 3:4, 3:2, 2:3",modelValue:s.aspect_ratio,"onUpdate:modelValue":a[22]||(a[22]=e=>s.aspect_ratio=e),type:"select"},null,8,["list","modelValue"]),e.createVNode(g,{mode:"single-column",valueName:"value",labelName:"label",list:s.aspect_ratioDatas,isDefaultSelect:"",defaultSelectValue:s.aspect_ratio,modelValue:s.showAspect_ratio,"onUpdate:modelValue":a[23]||(a[23]=e=>s.showAspect_ratio=e),onConfirm:n.changeAspect_ratio},null,8,["list","defaultSelectValue","modelValue","onConfirm"])])),_:1})])]),e.createElementVNode("view",{class:"flex justify-end"},[e.createElementVNode("button",{onClick:a[24]||(a[24]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"aidrawApi","data-prompt":s.prompt,"data-negative_prompt":s.negative_prompt,"data-image":s.image,"data-image_fidelity":s.image_fidelity,"data-aspect_ratio":s.aspect_ratio,class:"diygw-btn green flex1 margin-xs"},"提交任务",8,["data-prompt","data-negative_prompt","data-image","data-image_fidelity","data-aspect_ratio"])])])],34)):e.createCommentVNode("",!0),s.modal1?(e.openBlock(),e.createElementBlock("view",{key:2,onTouchmove:a[41]||(a[41]=e.withModifiers((()=>{}),["stop","prevent"])),class:e.normalizeClass(["diygw-modal bottom-modal",s.modal1]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{class:"diygw-dialog diygw-dialog-modal1"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"}," 可灵AI文生视频 "),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal1",onClick:a[26]||(a[26]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content justify-center"},[e.createVNode(u,{class:"diygw-col-24",label:"正向提示词",prop:"prompt1"},{default:e.withCtx((()=>[e.createVNode(d,{maxlength:"200",height:"60px",class:"",placeholder:"正向文本提示，必须，不能超过500个字符",modelValue:s.prompt1,"onUpdate:modelValue":a[27]||(a[27]=e=>s.prompt1=e),type:"textarea"},null,8,["modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"负向提示词",prop:"negative_prompt1"},{default:e.withCtx((()=>[e.createVNode(d,{maxlength:"200",height:"60px",class:"",placeholder:"负向文本提示，可空，不能超过200个字符",modelValue:s.negative_prompt1,"onUpdate:modelValue":a[28]||(a[28]=e=>s.negative_prompt1=e),type:"textarea"},null,8,["modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"自由度",prop:"cfg_scale1"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"flex1 flex align-center diygw-col-24"},[e.createVNode(m,{class:"flex1","active-color":"#07c160",blockWidth:"50",onChange:n.changeCfg_scale1,name:"cfg_scale1",modelValue:s.cfg_scale1,"onUpdate:modelValue":a[29]||(a[29]=e=>s.cfg_scale1=e),min:0,max:1,step:.1},null,8,["onChange","modelValue","step"])])])),_:1}),e.createElementVNode("text",{class:"diygw-col-0"}," 生成视频的自由度，可选，值越大，相关性越强 "),e.createVNode(u,{class:"diygw-col-24",label:"选择模式",prop:"mode1"},{default:e.withCtx((()=>[e.createVNode(h,{onClick:a[30]||(a[30]=e=>s.showMode1=!0),class:"diygw-col-24",valueName:"value",labelName:"label",list:s.mode1Datas,placeholder:"请选择",modelValue:s.mode1,"onUpdate:modelValue":a[31]||(a[31]=e=>s.mode1=e),type:"select"},null,8,["list","modelValue"]),e.createVNode(g,{mode:"single-column",valueName:"value",labelName:"label",list:s.mode1Datas,isDefaultSelect:"",defaultSelectValue:s.mode1,modelValue:s.showMode1,"onUpdate:modelValue":a[32]||(a[32]=e=>s.showMode1=e),onConfirm:n.changeMode1},null,8,["list","defaultSelectValue","modelValue","onConfirm"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"相机控制",prop:"camera_control_type1"},{default:e.withCtx((()=>[e.createVNode(h,{onClick:a[33]||(a[33]=e=>s.showCamera_control_type1=!0),class:"diygw-col-24",valueName:"value",labelName:"label",list:s.camera_control_type1Datas,placeholder:"请选择",modelValue:s.camera_control_type1,"onUpdate:modelValue":a[34]||(a[34]=e=>s.camera_control_type1=e),type:"select"},null,8,["list","modelValue"]),e.createVNode(g,{mode:"single-column",valueName:"value",labelName:"label",list:s.camera_control_type1Datas,isDefaultSelect:"",defaultSelectValue:s.camera_control_type1,modelValue:s.showCamera_control_type1,"onUpdate:modelValue":a[35]||(a[35]=e=>s.showCamera_control_type1=e),onConfirm:n.changeCamera_control_type1},null,8,["list","defaultSelectValue","modelValue","onConfirm"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"纵横比",prop:"aspect_ratio1"},{default:e.withCtx((()=>[e.createVNode(h,{onClick:a[36]||(a[36]=e=>s.showAspect_ratio1=!0),class:"diygw-col-24",valueName:"value",labelName:"label",list:s.aspect_ratio1Datas,placeholder:"选择纵横比，16:9, 9:16, 1:1, 4:3, 3:4, 3:2, 2:3",modelValue:s.aspect_ratio1,"onUpdate:modelValue":a[37]||(a[37]=e=>s.aspect_ratio1=e),type:"select"},null,8,["list","modelValue"]),e.createVNode(g,{mode:"single-column",valueName:"value",labelName:"label",list:s.aspect_ratio1Datas,isDefaultSelect:"",defaultSelectValue:s.aspect_ratio1,modelValue:s.showAspect_ratio1,"onUpdate:modelValue":a[38]||(a[38]=e=>s.showAspect_ratio1=e),onConfirm:n.changeAspect_ratio1},null,8,["list","defaultSelectValue","modelValue","onConfirm"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"视频时长",prop:"duration1"},{default:e.withCtx((()=>[e.createVNode(y,{class:"flex flex-wrap diygw-col-24 justify-around",wrapClass:" justify-around",modelValue:s.duration1,"onUpdate:modelValue":a[39]||(a[39]=e=>s.duration1=e)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.duration1Datas,((t,a)=>(e.openBlock(),e.createBlock(f,{shape:"circle",key:a,name:t.value},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.label),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1})])]),e.createElementVNode("view",{class:"flex justify-end"},[e.createElementVNode("button",{onClick:a[40]||(a[40]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"aivideoApi","data-prompt":s.prompt1,"data-negative_prompt":s.negative_prompt1,"data-cfg_scale":s.cfg_scale1,"data-mode":s.mode1,"data-camera_control_type":s.camera_control_type1,"data-aspect_ratio":s.aspect_ratio1,"data-duration":s.duration1,class:"diygw-btn green flex1 margin-xs"},"提交任务",8,["data-prompt","data-negative_prompt","data-cfg_scale","data-mode","data-camera_control_type","data-aspect_ratio","data-duration"])])])],34)):e.createCommentVNode("",!0),s.modal3?(e.openBlock(),e.createElementBlock("view",{key:3,onTouchmove:a[53]||(a[53]=e.withModifiers((()=>{}),["stop","prevent"])),class:e.normalizeClass(["diygw-modal bottom-modal",s.modal3]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{class:"diygw-dialog diygw-dialog-modal3"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"}," 可灵AI图生视频 "),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal3",onClick:a[42]||(a[42]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content justify-center"},[e.createVNode(u,{class:"diygw-col-24",label:"参考图像 必须上传",prop:"image3"},{default:e.withCtx((()=>[e.createVNode(p,{width:"160",height:"160",margin:"0",maxCount:"1",onOnSuccess:n.uploadImage3,onOnRemove:n.delImage3,action:"http://127.0.0.1/upload",modelValue:s.image3,"onUpdate:modelValue":a[43]||(a[43]=e=>s.image3=e)},null,8,["onOnSuccess","onOnRemove","modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"参考图像  尾帧控制 可不上传",prop:"image_tail3"},{default:e.withCtx((()=>[e.createVNode(p,{width:"160",height:"160",margin:"0",maxCount:"1",onOnSuccess:n.uploadImage_tail3,onOnRemove:n.delImage_tail3,action:"http://127.0.0.1/upload",modelValue:s.image_tail3,"onUpdate:modelValue":a[44]||(a[44]=e=>s.image_tail3=e)},null,8,["onOnSuccess","onOnRemove","modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"正向提示词",prop:"prompt3"},{default:e.withCtx((()=>[e.createVNode(d,{maxlength:"200",height:"60px",class:"",placeholder:"正向文本提示，必须，不能超过500个字符",modelValue:s.prompt3,"onUpdate:modelValue":a[45]||(a[45]=e=>s.prompt3=e),type:"textarea"},null,8,["modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"负向提示词",prop:"negative_prompt3"},{default:e.withCtx((()=>[e.createVNode(d,{maxlength:"200",height:"60px",class:"",placeholder:"负向文本提示，可空，不能超过200个字符",modelValue:s.negative_prompt3,"onUpdate:modelValue":a[46]||(a[46]=e=>s.negative_prompt3=e),type:"textarea"},null,8,["modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"自由度",prop:"cfg_scale3"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"flex1 flex align-center diygw-col-24"},[e.createVNode(m,{class:"flex1","active-color":"#07c160",blockWidth:"50",onChange:n.changeCfg_scale3,name:"cfg_scale3",modelValue:s.cfg_scale3,"onUpdate:modelValue":a[47]||(a[47]=e=>s.cfg_scale3=e),min:0,max:1,step:.1},null,8,["onChange","modelValue","step"])])])),_:1}),e.createElementVNode("text",{class:"diygw-col-0"}," 生成视频的自由度，可选，值越大，相关性越强 "),e.createVNode(u,{class:"diygw-col-24",label:"选择模式",prop:"mode3"},{default:e.withCtx((()=>[e.createVNode(h,{onClick:a[48]||(a[48]=e=>s.showMode3=!0),class:"diygw-col-24",valueName:"value",labelName:"label",list:s.mode3Datas,placeholder:"请选择",modelValue:s.mode3,"onUpdate:modelValue":a[49]||(a[49]=e=>s.mode3=e),type:"select"},null,8,["list","modelValue"]),e.createVNode(g,{mode:"single-column",valueName:"value",labelName:"label",list:s.mode3Datas,isDefaultSelect:"",defaultSelectValue:s.mode3,modelValue:s.showMode3,"onUpdate:modelValue":a[50]||(a[50]=e=>s.showMode3=e),onConfirm:n.changeMode3},null,8,["list","defaultSelectValue","modelValue","onConfirm"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"视频时长",prop:"duration3"},{default:e.withCtx((()=>[e.createVNode(y,{class:"flex flex-wrap diygw-col-24 justify-around",wrapClass:" justify-around",modelValue:s.duration3,"onUpdate:modelValue":a[51]||(a[51]=e=>s.duration3=e)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.duration3Datas,((t,a)=>(e.openBlock(),e.createBlock(f,{shape:"circle",key:a,name:t.value},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.label),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1})])]),e.createElementVNode("view",{class:"flex justify-end"},[e.createElementVNode("button",{onClick:a[52]||(a[52]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"aivideo_picApi","data-prompt":s.prompt3,"data-negative_prompt":s.negative_prompt3,"data-cfg_scale":s.cfg_scale3,"data-mode":s.mode3,"data-duration":s.duration3,"data-image":s.image3,"data-image_tail":s.image_tail3,class:"diygw-btn green flex1 margin-xs"},"提交任务",8,["data-prompt","data-negative_prompt","data-cfg_scale","data-mode","data-duration","data-image","data-image_tail"])])])],34)):e.createCommentVNode("",!0),s.modal?(e.openBlock(),e.createElementBlock("view",{key:4,onTouchmove:a[58]||(a[58]=e.withModifiers((()=>{}),["stop","prevent"])),class:e.normalizeClass(["diygw-modal bottom-modal",s.modal]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{class:"diygw-dialog diygw-dialog-modal"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"}," 添加账号 "),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal",onClick:a[54]||(a[54]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content"},[e.createVNode(u,{class:"diygw-col-24",label:"账号",prop:"username"},{default:e.withCtx((()=>[e.createVNode(d,{focus:s.usernameFocus,placeholder:"",modelValue:s.username,"onUpdate:modelValue":a[55]||(a[55]=e=>s.username=e)},null,8,["focus","modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"密码",prop:"password"},{default:e.withCtx((()=>[e.createVNode(d,{focus:s.passwordFocus,placeholder:"",modelValue:s.password,"onUpdate:modelValue":a[56]||(a[56]=e=>s.password=e)},null,8,["focus","modelValue"])])),_:1})])]),e.createElementVNode("view",{class:"flex justify-end"},[e.createElementVNode("button",{onClick:a[57]||(a[57]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"adduserApi","data-username":s.username,"data-password":s.password,class:"diygw-btn green flex1 margin-xs"},"立即添加",8,["data-username","data-password"])])])],34)):e.createCommentVNode("",!0),s.modal5?(e.openBlock(),e.createElementBlock("view",{key:5,onTouchmove:a[65]||(a[65]=e.withModifiers((()=>{}),["stop","prevent"])),class:e.normalizeClass(["diygw-modal bottom-modal",s.modal5]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{class:"diygw-dialog diygw-dialog-modal5"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"}," 添加点数 "),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal5",onClick:a[59]||(a[59]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content"},[e.createVNode(u,{class:"diygw-col-24",label:"账号",prop:"addnum_input"},{default:e.withCtx((()=>[e.createVNode(d,{focus:s.addnum_inputFocus,placeholder:"",modelValue:s.addnum_input,"onUpdate:modelValue":a[60]||(a[60]=e=>s.addnum_input=e)},null,8,["focus","modelValue"])])),_:1}),e.createVNode(u,{class:"diygw-col-24",label:"面额",prop:"num"},{default:e.withCtx((()=>[e.createVNode(h,{onClick:a[61]||(a[61]=e=>s.showNum=!0),class:"diygw-col-24",valueName:"value",labelName:"label",list:s.numDatas,placeholder:"请选择",modelValue:s.num,"onUpdate:modelValue":a[62]||(a[62]=e=>s.num=e),type:"select"},null,8,["list","modelValue"]),e.createVNode(g,{mode:"single-column",valueName:"value",labelName:"label",list:s.numDatas,isDefaultSelect:"",defaultSelectValue:s.num,modelValue:s.showNum,"onUpdate:modelValue":a[63]||(a[63]=e=>s.showNum=e),onConfirm:n.changeNum},null,8,["list","defaultSelectValue","modelValue","onConfirm"])])),_:1})])]),e.createElementVNode("view",{class:"flex justify-end"},[e.createElementVNode("button",{onClick:a[64]||(a[64]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"addnumApi","data-username":s.addnum_input,"data-num":s.num,class:"diygw-btn green flex1 margin-xs"},"立即添加",8,["data-username","data-num"])])])],34)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-7e700e94"]]);const H=a({data:()=>({url:""}),onLoad(e){e&&e.url&&(this.url=decodeURIComponent(e.url))},onShow(){},onShareAppMessage:function(){}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:"start"},[e.createElementVNode("web-view",{src:o.url},null,8,["src"])])}]]);const W=a({data:()=>({userInfo:{},globalOption:{},globalData:{},tasksNum:1,tasks:{msg:"",status:0,success:!0,data:{list:[{id:0,user_id:0,task_id:"",prompt:"",status:"",result:"",chatype:0,created_at:"",updated_at:""}]}},cha:{msg:"",status:0,success:!0,data:{status:"",list:[{index:0,url:""}]}}}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){await this.tasksApi()},async tasksApi(e){((e=e||{}).refresh||"object"!=typeof e)&&(this.tasksNum=1);let t={pageNum:this.tasksNum,pageSize:10},a=await this.$http.post("/tasks",t,{},"json"),i=a.data.list;if(1==t.pageNum)this.tasks=a;else if(i){let e=this.tasks.data.list.concat(i);a.data.list=e,this.tasks=a}i&&i.length>0&&(this.tasksNum=this.tasksNum+1),1!=a.success&&await this.showModal("查询失败，请联系管理员！"),this.navigateTo({type:"tip",tip:"查询成功！"})},async chaApi(e){let t={task_id:(e=e||{}).task_id||this.task_id,chatype:e.chatype||this.chatype};uni.showLoading({mask:!0,title:"加载中"});let a=await this.$http.post("/tasks/cha",t,{},"json");if(this.cha=a,uni.hideLoading(),1!=a.success&&await this.showModal(a.msg),"succeed"==a.data.status){if(1==e.chatype)return this.navigateTo({type:"copy",copy:a.data.list[0].url,tip:""}),this.navigateTo({type:"tip",tip:"图片url已经复制到剪贴板啦！或者长按保存哦！"}),void this.navigateTo({type:"preview",img:a.data.list[0].url});if(2==e.chatype)return uni.showLoading({mask:!0,title:"加载中"}),void uni.downloadFile({url:a.data.list[0].url,success:e=>{200===e.statusCode?(uni.saveVideoToPhotosAlbum({filePath:e.tempFilePath}),uni.hideLoading(),uni.showToast({title:"下载成功",icon:"success"}),this.showModal("视频url已经复制到剪贴板啦！如果没有保存成功，请自行复制到浏览器下载！")):uni.showToast({title:"资源格式错误，请联系管理员"})},fail:e=>{uni.hideLoading(),uni.showToast({title:"下载失败"})}})}await this.showModal("任务可能还没有完成！当前状态"+a.data.status)}},onReachBottom(){this.tasksApi()}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:"container container333415"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex1-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex44-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text48-clz text-red"}," 内部专用 请勿外泄 ")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.tasks.data.list,((i,l)=>(e.openBlock(),e.createElementBlock("view",{key:l,class:"flex flex-wrap diygw-col-24 flex-direction-column flex46-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex47-clz"},[e.createElementVNode("text",{class:"diygw-text-line2 diygw-col-24 text50-clz"},e.toDisplayString(i.prompt),1),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-16 text-clz text-grey"},e.toDisplayString(i.task_id),1),"succeed"==i.status?(e.openBlock(),e.createElementBlock("text",{key:0,class:"diygw-text-line1 diygw-col-7 text51-clz"}," 已完成 ")):e.createCommentVNode("",!0),"failed"==i.status?(e.openBlock(),e.createElementBlock("text",{key:1,class:"diygw-text-line1 diygw-col-7 text3-clz"}," 失败 ")):e.createCommentVNode("",!0),"processing"==i.status?(e.openBlock(),e.createElementBlock("text",{key:2,class:"diygw-text-line1 diygw-col-7 text2-clz"}," 进行中 ")):e.createCommentVNode("",!0),"submitted"==i.status?(e.openBlock(),e.createElementBlock("text",{key:3,class:"diygw-text-line1 diygw-col-7 text1-clz"}," 已提交 ")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-start items-center flex48-clz"},[e.createElementVNode("button",{onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"chaApi","data-task_id":i.task_id,"data-chatype":i.chatype,class:"diygw-col-24 btn-clz diygw-btn-default"},"查询结果",8,["data-task_id","data-chatype"])])])))),128))]),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-3d3f2d52"]]);const Z=a({data:()=>({userInfo:{},globalOption:{},globalData:{},admin_tasksNum:1,admin_tasks:{msg:"",status:0,success:!0,data:{list:[{id:0,user_id:0,task_id:"",prompt:"",status:"",result:"",chatype:0,created_at:"",updated_at:""}]}},cha:{msg:"",status:0,success:!0,data:{status:"",list:[{index:0,url:""}]}},user_cha:{msg:"",status:0,success:!0,data:{list:{id:0,username:"",password:"",num:0,is_admin:0,created_at:""}}},modal:""}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){await this.admin_tasksApi()},async admin_tasksApi(e){((e=e||{}).refresh||"object"!=typeof e)&&(this.admin_tasksNum=1);let t={pageNum:this.admin_tasksNum,pageSize:10},a=await this.$http.post("/admin_tasks",t,{},"json"),i=a.data.list;if(1==t.pageNum)this.admin_tasks=a;else if(i){let e=this.admin_tasks.data.list.concat(i);a.data.list=e,this.admin_tasks=a}i&&i.length>0&&(this.admin_tasksNum=this.admin_tasksNum+1),1!=a.success&&await this.showModal("查询失败，请联系管理员！"),this.navigateTo({type:"tip",tip:"查询成功！"})},async chaApi(e){let t={task_id:(e=e||{}).task_id||this.task_id,chatype:e.chatype||this.chatype};uni.showLoading({mask:!0,title:"加载中"});let a=await this.$http.post("/tasks/cha",t,{},"json");if(this.cha=a,uni.hideLoading(),1!=a.success&&await this.showModal(a.msg),"succeed"==a.data.status){if(1==e.chatype)return this.navigateTo({type:"copy",copy:a.data.list[0].url,tip:""}),this.navigateTo({type:"tip",tip:"图片url已经复制到剪贴板啦！或者长按保存哦！"}),void this.navigateTo({type:"preview",img:a.data.list[0].url});if(2==e.chatype)return uni.showLoading({mask:!0,title:"加载中"}),void uni.downloadFile({url:a.data.list[0].url,success:e=>{200===e.statusCode?(uni.saveVideoToPhotosAlbum({filePath:e.tempFilePath}),uni.hideLoading(),uni.showToast({title:"下载成功",icon:"success"}),this.showModal("视频url已经复制到剪贴板啦！如果没有保存成功，请自行复制到浏览器下载！")):uni.showToast({title:"资源格式错误，请联系管理员"})},fail:e=>{uni.hideLoading(),uni.showToast({title:"下载失败"})}})}await this.showModal("任务可能还没有完成！当前状态"+a.data.status)},async user_chaApi(e){let t={user_id:(e=e||{}).user_id||this.user_id},a=await this.$http.post("/user/cha",t,{},"json");this.user_cha=a,this.navigateTo({type:"openmodal",id:"modal"})},stopCloseModal(e){e.stopPropagation()},closeModal(){this.modal=""}},onReachBottom(){this.admin_tasksApi()}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:"container container333415"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex1-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex44-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text48-clz text-red"}," 内部专用 请勿外泄 ")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.admin_tasks.data.list,((i,l)=>(e.openBlock(),e.createElementBlock("view",{key:l,class:"flex flex-wrap diygw-col-24 flex-direction-column flex46-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex47-clz"},[e.createElementVNode("text",{class:"diygw-text-line2 diygw-col-24 text50-clz"},e.toDisplayString(i.prompt),1),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-16 text1-clz text-grey"},e.toDisplayString(i.task_id),1),"succeed"==i.status?(e.openBlock(),e.createElementBlock("text",{key:0,class:"diygw-text-line1 diygw-col-7 text51-clz"}," 已完成 ")):e.createCommentVNode("",!0),"submitted"==i.status?(e.openBlock(),e.createElementBlock("text",{key:1,class:"diygw-text-line1 diygw-col-7 text4-clz"}," 已提交 ")):e.createCommentVNode("",!0),"failed"==i.status?(e.openBlock(),e.createElementBlock("text",{key:2,class:"diygw-text-line1 diygw-col-7 text3-clz"}," 失败 ")):e.createCommentVNode("",!0),"processing"==i.status?(e.openBlock(),e.createElementBlock("text",{key:3,class:"diygw-text-line1 diygw-col-7 text2-clz"}," 进行中 ")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"flex diygw-col-0"},[e.createElementVNode("view",{class:"diygw-tag margin-xs bg-cyan",onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"user_chaApi","data-user_id":i.user_id},[e.createElementVNode("text",{class:"diygw-icon diy-icon-peoplelist"}),e.createElementVNode("text",null,e.toDisplayString(i.user_id),1)],8,["data-user_id"])]),e.createElementVNode("text",{class:"diygw-col-0"}," * 点击查询该用户信息及该用户所有任务 "),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-start items-center flex48-clz"},[e.createElementVNode("button",{onClick:a[1]||(a[1]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"chaApi","data-task_id":i.task_id,"data-chatype":i.chatype,class:"diygw-col-24 btn-clz diygw-btn-default"},"查询结果",8,["data-task_id","data-chatype"])])])))),128))]),o.modal?(e.openBlock(),e.createElementBlock("view",{key:0,onTouchmove:a[5]||(a[5]=e.withModifiers((()=>{}),["stop","prevent"])),onClick:a[6]||(a[6]=e.withModifiers(((...e)=>s.closeModal&&s.closeModal(...e)),["stop","prevent"])),class:e.normalizeClass(["diygw-modal basic",o.modal]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{onClick:a[4]||(a[4]=e.withModifiers(((...e)=>s.stopCloseModal&&s.stopCloseModal(...e)),["stop","prevent"])),class:"diygw-dialog diygw-dialog-modal basis-lg"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"},e.toDisplayString(o.user_cha.data.list.username+" 剩余点数 "+o.user_cha.data.list.num),1),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal",onClick:a[2]||(a[2]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex2-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-start items-center flex5-clz"},[e.createElementVNode("button",{onClick:a[3]||(a[3]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/user_task","data-userid_cha":o.user_cha.data.list.id,class:"diygw-col-24 btn1-clz diygw-btn-default"},"查询该用户所有任务",8,["data-userid_cha"])])])])])])],34)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-82c51257"]]);const J=a({data:()=>({userInfo:{},globalOption:{},globalData:{},cha:{msg:"",status:0,success:!0,data:{status:"",list:[{index:0,url:""}]}},admin_tasksNum:1,admin_tasks:{msg:"",status:0,success:!0,data:{list:[{id:0,user_id:0,task_id:"",prompt:"",status:"",result:"",chatype:0,created_at:"",updated_at:""}]}},modal:""}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){await this.admin_tasksApi()},async chaApi(e){let t={task_id:(e=e||{}).task_id||this.task_id,chatype:e.chatype||this.chatype};uni.showLoading({mask:!0,title:"加载中"});let a=await this.$http.post("/tasks/cha",t,{},"json");if(this.cha=a,uni.hideLoading(),1!=a.success&&await this.showModal(a.msg),"succeed"==a.data.status){if(1==e.chatype)return this.navigateTo({type:"copy",copy:a.data.list[0].url,tip:""}),this.navigateTo({type:"tip",tip:"图片url已经复制到剪贴板啦！或者长按保存哦！"}),void this.navigateTo({type:"preview",img:a.data.list[0].url});if(2==e.chatype)return uni.showLoading({mask:!0,title:"加载中"}),void uni.downloadFile({url:a.data.list[0].url,success:e=>{200===e.statusCode?(uni.saveVideoToPhotosAlbum({filePath:e.tempFilePath}),uni.hideLoading(),uni.showToast({title:"下载成功",icon:"success"}),this.showModal("视频url已经复制到剪贴板啦！如果没有保存成功，请自行复制到浏览器下载！")):uni.showToast({title:"资源格式错误，请联系管理员"})},fail:e=>{uni.hideLoading(),uni.showToast({title:"下载失败"})}})}await this.showModal("任务可能还没有完成！当前状态"+a.data.status)},async admin_tasksApi(e){((e=e||{}).refresh||"object"!=typeof e)&&(this.admin_tasksNum=1);let t={pageNum:this.admin_tasksNum,pageSize:10,user_id:e.user_id||this.globalOption.userid_cha},a=await this.$http.post("/admin_tasks",t,{},"json"),i=a.data.list;if(1==t.pageNum)this.admin_tasks=a;else if(i){let e=this.admin_tasks.data.list.concat(i);a.data.list=e,this.admin_tasks=a}i&&i.length>0&&(this.admin_tasksNum=this.admin_tasksNum+1),1!=a.success&&await this.showModal("查询失败，请联系管理员！"),this.navigateTo({type:"tip",tip:"查询成功！"})},stopCloseModal(e){e.stopPropagation()},closeModal(){this.modal=""}},onReachBottom(){this.admin_tasksApi()}},[["render",function(t,a,i,l,o,s){return e.openBlock(),e.createElementBlock("view",{class:"container container333415"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex1-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex44-clz"},[e.createElementVNode("text",{class:"diygw-col-0 text48-clz text-red"}," 内部专用 请勿外泄 ")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.admin_tasks.data.list,((i,l)=>(e.openBlock(),e.createElementBlock("view",{key:l,class:"flex flex-wrap diygw-col-24 flex-direction-column flex46-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex47-clz"},[e.createElementVNode("text",{class:"diygw-text-line2 diygw-col-24 text50-clz"},e.toDisplayString(i.prompt),1),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-16 text1-clz text-grey"},e.toDisplayString(i.task_id),1),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-7 text51-clz"},e.toDisplayString(i.status),1)]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-start items-center flex48-clz"},[e.createElementVNode("button",{onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"chaApi","data-task_id":i.task_id,"data-chatype":i.chatype,class:"diygw-col-24 btn-clz diygw-btn-default"},"查询结果",8,["data-task_id","data-chatype"])])])))),128))]),o.modal?(e.openBlock(),e.createElementBlock("view",{key:0,onTouchmove:a[4]||(a[4]=e.withModifiers((()=>{}),["stop","prevent"])),onClick:a[5]||(a[5]=e.withModifiers(((...e)=>s.closeModal&&s.closeModal(...e)),["stop","prevent"])),class:e.normalizeClass(["diygw-modal basic",o.modal]),style:{"z-index":"1000000"}},[e.createElementVNode("view",{onClick:a[3]||(a[3]=e.withModifiers(((...e)=>s.stopCloseModal&&s.stopCloseModal(...e)),["stop","prevent"])),class:"diygw-dialog diygw-dialog-modal basis-lg"},[e.createElementVNode("view",{class:"justify-end diygw-bar"},[e.createElementVNode("view",{class:"content"},e.toDisplayString(t.user_cha.data.list.username+" 剩余点数 "+t.user_cha.data.list.num),1),e.createElementVNode("view",{class:"action","data-type":"closemodal","data-id":"modal",onClick:a[1]||(a[1]=(...e)=>t.navigateTo&&t.navigateTo(...e))},[e.createElementVNode("text",{class:"diy-icon-close"})])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"flex diygw-dialog-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tasks.data.list,((i,l)=>(e.openBlock(),e.createElementBlock("view",{key:l,class:"flex flex-wrap diygw-col-24 flex-direction-column flex2-clz"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between items-center flex4-clz"},[e.createElementVNode("text",{class:"diygw-text-line2 diygw-col-24 text2-clz"},e.toDisplayString(i.prompt),1),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-16 text3-clz text-grey"},e.toDisplayString(i.task_id),1),e.createElementVNode("text",{class:"diygw-text-line1 diygw-col-7 text6-clz"},e.toDisplayString(i.status),1)]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-start items-center flex5-clz"},[e.createElementVNode("button",{onClick:a[2]||(a[2]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"chaApi","data-task_id":i.task_id,"data-chatype":i.chatype,class:"diygw-col-24 btn1-clz diygw-btn-default"},"查询结果",8,["data-task_id","data-chatype"])])])))),128))])])])],34)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-c5384d02"]]);__definePage("pages/login",B),__definePage("pages/index",q),__definePage("pages/webview",H),__definePage("pages/tasks",W),__definePage("pages/admin_tasks",Z),__definePage("pages/user_task",J);const Y={globalData:{userInfo:null,tabBar:[],homePage:"/pages/login",pages:["/pages/login","/pages/index"],userData:{}}};var G={weixin(e,t){uni.getUserProfile?uni.getUserProfile({lang:"zh_CN",desc:"用于登陆",success:function(a){uni.login({provider:"weixin",success:function(i){let l={code:i.code,type:t.logintype,userInfo:JSON.stringify(a.userInfo)};e.$http.post(t.loginurl,l,{},"json").then((a=>{"object"==typeof a.data&&(e.setData({userInfo:a.data}),e.$session.setUser(a.data)),e[t.callback]?e[t.callback](a):e[t.callback+"Function"]?e[t.callback+"Function"](a):e[t.callback+"Api"]&&e[t.callback+"Api"](a)}))},fail:function(){wx.showModal({title:"获取用户信息",content:"请允许授权以便为您提供给服务",success:function(a){a.confirm&&e.navigateTo(t)}})}})},fail:function(e){wx.showModal({title:"友情提示",content:"已拒绝小程序获取信息",showCancel:!1})}}):uni.showToast({title:"登录失败，请在小程序上登录",icon:"none"})}},Q={async pay(e){let t=getApp().globalData.currentPage,a=t.$session;if(!a.getUser())return t.showToast("请先登录"),void(e.fail&&"function"==typeof e.fail&&e.fail());if(!e.total)return t.showToast("请配置价格参数total"),void(e.fail&&"function"==typeof e.fail&&e.fail());let i={total:e.total,body:e.body};(e.openid||a.getUser()&&a.getUser().openid)&&(i.openid=e.openid||a.getUser().openid),e.param&&(i=Object.assign(i,e.param));let o={};e.header&&(o=e.header);let s=await t.$http.post(e.url||"/api/wepay/order",i,o,"json");return 200!=s.code?(l("log","at common/Pay.js:39",s),t.showToast(s.msg||"发起支付失败"),void(e.fail&&"function"==typeof e.fail&&e.fail(s))):this[e.paytype]?void this[e.paytype](Object.assign(s,e)):(e.fail&&"function"==typeof e.fail&&e.fail(s),void t.showToast("请使用微信打开"))},weixin(e={}){uni.requestPayment({provider:"wxpay",timeStamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:t=>{e.success&&"function"==typeof e.success?e.success(t):l("log","at common/Pay.js:69","配置支付回调成功方法")},fail:e=>{param.fail&&"function"==typeof param.fail?param.fail(e):l("log","at common/Pay.js:76","配置支付回调失败方法")}})}};const X=(e,t)=>new class{constructor(e={}){Object.assign(this,{rules:e}),this.__init()}__init(){this.__initMethods(),this.__initDefaults(),this.__initData()}__initDefaults(){this.defaults={messages:{required:"这是必填字段。",email:"请输入有效的电子邮件地址。",tel:"请输入11位的手机号码。",url:"请输入有效的网址。",date:"请输入有效的日期。",dateISO:"请输入有效的日期（ISO），例如：2009-06-23，1998/01/22。",number:"请输入有效的数字。",regexp:"请输入有效的正则匹配值。",digits:"只能输入数字。",idcard:"请输入18位的有效身份证。",equalTo:"输入值必须和%s相同。",contains:"输入值必须包含%s。",minlength:"最少要输入%s个字符。",maxlength:"最多可以输入%s个字符。",rangelength:"请输入长度在%s到%s之间的字符。",min:"请输入不小于%s的数值。",max:"请输入不大于%s的数值。",range:"请输入范围在%s到 {1} 之间的数值。"}}}__initData(){this.form={},this.errorList=[]}__initMethods(){const e=this;e.methods={required:{valid(t,a){if(!e.depend(a))return"dependency-mismatch";if("number"==typeof t)t=t.toString();else if("boolean"==typeof t)return!0;return t.length>0},message:e=>e.message||"这是必填字段。"},email:{valid:(t,a)=>e.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t),message:e=>e.message||"请输入有效的电子邮件地址。"},tel:{valid:(t,a)=>e.optional(t)||/^1[34578]\d{9}$/.test(t),message:e=>e.message||"请输入11位的手机号码。"},url:{valid:(t,a)=>e.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t),message:e=>e.message||"请输入有效的网址。"},date:{valid:(t,a)=>e.optional(t)||!/Invalid|NaN/.test(new Date(t).toString()),message:e=>e.message||"请输入有效的日期。"},dateISO:{valid:(t,a)=>e.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t),message:e=>e.message||"请输入有效的日期（ISO），例如：2009-06-23，1998/01/22。"},number:{valid:(t,a)=>e.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t),message:e=>e.message||"请输入有效的数字。"},digits:{valid:(t,a)=>e.optional(t)||/^\d+$/.test(t),message:e=>e.message||"只能输入整数。"},idcard:{valid:(t,a)=>e.optional(t)||/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t),message:e=>e.message||"请输入18位的有效身份证。"},regexp:{valid(t,a){var i="string"==typeof a.regexp?new RegExp(a.regexp):a.regexp;return e.optional(t)||i.test(t)},message:e=>e.message||"请输入有效的正则匹配值"},equalTo:{valid:(t,a)=>e.optional(t)||t===e.scope.detail.value[a.field],message:t=>e.formatMessage(t.message||"输入值必须和%s相同。",[e.scope.detail.value[t.field]])},contains:{valid:(t,a)=>e.optional(t)||t.indexOf(a.value)>=0,message:t=>e.formatMessage(t.message||"输入值必须包含%s。",[t.value])},minlength:{valid:(t,a)=>e.optional(t)||t.length>=a.value,message:t=>e.formatMessage(t.message||"最少要输入%s个字符。",[t.value])},maxlength:{valid:(t,a)=>e.optional(t)||t.length<=a.value,message:t=>e.formatMessage(t.message||"最多可以输入%s个字符。",[t.value])},rangelength:{valid:(t,a)=>e.optional(t)||t.length>=a.min&&t.length<=a.max,message:t=>e.formatMessage(t.message||"请输入长度在%s到%s之间的字符。",[t.min,t.max])},min:{valid:(t,a)=>e.optional(t)||t>=a.value,message:t=>e.formatMessage(t.message||"请输入不小于%s的数值。",[t.value])},max:{valid:(t,a)=>e.optional(t)||t<=a.value,message:t=>e.formatMessage(t.message||"请输入不大于%s的数值。",[t.value])},range:{valid:(t,a)=>e.optional(t)||t>=a.min&&t<=a.max,message:t=>e.formatMessage(t.message||"请输入范围在%s到%s之间的数值。",[t.min,t.max])}}}addMethod(e,t,a){this.methods[e]=t,this.defaults.messages[e]=void 0!==a?a:this.defaults.messages[e]}isValidMethod(e){return this.methods.hasOwnProperty(e)}formatMessage(e,t){for(var a in Array.isArray(t)||(t=[t]),t)e=e.replace("%s",t[a]);return e}formatTpl(e,t){const a=this;return 1===arguments.length?function(){let t=Array.from(arguments);return t.unshift(e),a.formatTpl.apply(this,t)}:(void 0===t||(arguments.length>2&&t.constructor!==Array&&(t=Array.from(arguments).slice(1)),t.constructor!==Array&&(t=[t]),t.forEach((function(t,a){e=e.replace(new RegExp("\\{"+a+"\\}","g"),(function(){return t}))}))),e)}depend(e){switch(typeof e){case"boolean":break;case"string":e=!!e.length;break;case"function":e=e();default:e=!0}return e}optional(e){return!this.methods.required.valid(e)&&"dependency-mismatch"}customMessage(e,t){return t.parameters.message||(t.parameters.message=this.defaults.messages[t.method]),t.parameters.message.indexOf("%s")>=0?this.methods[t.method].message:t.parameters.message}defaultMessage(e,t){let a=this.customMessage(e,t)||this.defaults.messages[t.method],i=typeof a;return"undefined"===i?a=`Warning: No message defined for ${t.method}.`:"function"===i&&(a=a.call(this,t.parameters)),a}formatTplAndAdd(e,t,a){let i=this.defaultMessage(e,t);this.errorList.push({param:e,msg:i,value:a})}checkParam(e,t,a){this.scope=a;const i=a.detail.value[e]||"";for(let l in t)if(this.isValidMethod(l)){const a={method:l,parameters:t[l]},o=this.methods[l].valid(i,a.parameters);if("dependency-mismatch"===o)continue;if(this.setValue(e,l,o,i),!o){this.formatTplAndAdd(e,a,i);break}}}setView(e){this.form[e]={$name:e,$valid:!0,$invalid:!1,$error:{},$success:{},$viewValue:""}}setValue(e,t,a,i){const l=this.form[e];l.$valid=a,l.$invalid=!a,l.$error[t]=!a,l.$success[t]=a,l.$viewValue=i}checkForm(e){this.__initData();for(let t in this.rules)this.setView(t),this.checkParam(t,this.rules[t],e);return this.valid()}valid(){return 0===this.size()}size(){return this.errorList.length}validationErrors(){return this.errorList}}(e,t);function K(e){for(let t in e){const a=/([\w$]+)|\[(:\d)\]/g,i=t.match(a);let l=this;for(let e=0;e<i.length-1;e++){l=l[i[e]]}l[i[i.length-1]]=e[t]}}var ee=[];function te(e){let t=e.currentTarget?e.currentTarget.dataset:e,{id:a,type:i}=t,o=this;if(e.currentTarget){if(ee[i])return;ee[i]=!0,setTimeout((()=>{ee[i]=!1}),500)}if("openmodal"==i)o[a]="open",setTimeout((()=>{o[a]="show"}),1);else if("closemodal"==i)o[a]="";else if("page"==i||"inner"==i||"href"==i)o.$tools.navigateTo(t.url,t);else if("backpage"==i)o.$tools.backpage(t.url);else if("submit"==i)ie("将执行表单提交动作");else if("reset"==i)ie("将执行表单重置动作");else if("tip"==i)ie(t.tip);else if("confirm"==i)uni.showModal({title:"提示",content:t.tip,showCancel:!1});else if("daohang"==i)uni.openLocation({latitude:Number(t.lat),longitude:Number(t.lng),address:t.address,success:function(){l("log","at common/Page.js:73","success")}});else if("phone"==i)o.$tools.makePhoneCall(e);else if("previewImage"==i||"preview"==i)uni.previewImage({current:o.$tools.renderImage(t.img),urls:[o.$tools.renderImage(t.img)]});else if("copy"==i)uni.setClipboardData({data:t.copy,showToast:!1,success:function(){ie(t.tip||"复制成功","none")}});else if("xcx"==i)uni.navigateToMiniProgram({appId:t.appid,path:t.path,success(e){}});else if("function"==typeof o[i])o[i](t);else if("login"==i){let e=t.logintype;G[e]?G[e](o,t):ie(i+"登录有待实现")}else if("pay"==i)Q.pay(t);else{let e=t["form-type"];e&&"function"==typeof o[e+"Form"]?o[e+"Form"](t):ie(i+"类型有待实现")}}function ae(e,t="提示",a=!0){return new Promise((i=>{uni.showModal({title:t,content:e,showCancel:a,success:function(e){e.confirm?i(!0):e.cancel&&i(!1)}})}))}function ie(e,t){uni.showToast({title:e,icon:t||"none"})}function le(e,t,a){if(null!=t&&e[t]&&e[t].children&&e[t].children){let i=e[t].children;if(null==a)return null!=i&&i.length>0?i.map((e=>e.label)):[];{if(null==i[a])return[];let e=i[a].children;return null!=e&&e.length>0?e.map((e=>e.label)):[]}}return[]}function oe(e,t){const a=t.match(/([\w$]+)|\[(:\d)\]/g);let i=e;for(let l=0;l<a.length-1;l++){i=i[a[l]]}return i[a[a.length-1]]}function se(e,t,a,i,l=9,o="img"){return new Promise((s=>{if(!i)return ie("请配置上传地址"),void s();uni.chooseImage({count:l,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(l){let n=l.tempFilePaths;for(let r=0;r<n.length;r++)uni.uploadFile({url:e.$http.setUrl(i),filePath:n[r],name:"file",header:{Authorization:e.$session.getToken()||""},success(i){let l=e.$tools.fromJson(i.data),s="";if(l.url&&(s=e.$tools.renderImage(l.url)),l.data&&e.$tools.isObject(l.data)&&l.data.url&&(s=e.$tools.renderImage(l.data.url)),"avatar"==o)e.setData({[t]:s});else{let i=oe(e,a).concat(s);e.setData({[a]:i,[t]:(i||[]).join(",").replace(/^[]/,"")})}},complete(){r==n.length-1&&s()}})}})}))}function ne(e,t,a="获取当前设置异常"){return new Promise(((i,l)=>{i(),t||(t={title:"授权",content:"需要您设置授权已使用相应功能",confirmText:"设置"}),uni.getSetting({success(a){switch(a.authSetting[e]){case void 0:uni.authorize({scope:e,success:e=>{i(e)},fail:e=>{uni.showToast({title:"授权失败",icon:"none",duration:3e3}),l(e)}});break;case!0:i();break;case!1:uni.showModal({...t,success:t=>{t.confirm?uni.openSetting({success:t=>{t.authSetting[e]?i(t):(l(t),uni.showToast({title:"授权失败",icon:"none",duration:3e3}))},fail:e=>{l(e),uni.showToast({title:"打开设置异常",icon:"none",duration:3e3})}}):(l(t),uni.showToast({title:"授权失败",icon:"none",duration:3e3}))},fail:e=>{l(e),uni.showToast({title:"弹窗异常",icon:"none",duration:3e3})}})}},fail:e=>{l(e),uni.showToast({title:a,icon:"none",duration:3e3})}})}))}function re(e){if(null!==e&&"object"==typeof e)for(let t in e)e[t]=decodeURIComponent(e[t]);return e}function ce(e){if(this.$session.getUser()&&(e.userInfo=this.$session.getUser()),this.$session.getValue("redirect_page")){let e=this.$session.getValue("redirect_page");this.$session.setValue("redirect_page",null),this.$tools.navigateTo(e.url,e)}getApp().globalData.currentPage=e}const de="https://ai.youyacao.com",ue="https://ai.youyacao.com",pe="333415";class me{constructor(){Object.assign(this,{$$basePath:de,$$fileBasePath:ue})}getFilenameExt(e){const t=e.name.split(".");return t[t.length-1]}getWeek(e){let t=new Date(e.getTime()),a=t.getDay()||7;t.setDate(t.getDate()-a+1+5);let i=new Date(t.getFullYear(),0,1),l=i.getDay(),o=1;0!=l&&(o=7-l+1),i=new Date(t.getFullYear(),0,1+o);let s=Math.ceil((t.valueOf()-i.valueOf())/864e5);return Math.ceil(s/7)}formatDateTime(e,t="YYYY-mm-dd HH:MM:SS"){if(this.isDate(e))return this.formatDate(e,t);if(!isNaN(e)){10==String(e).length&&(e*=1e3);let a=new Date(e);return this.formatDate(a,t)}if(e){let a=new Date(e);return this.formatDate(a,t)}}formatDate(e,t){let a=e.getDay(),i=Math.floor((e.getMonth()+3)/3).toString();const l={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString(),"q+":i},o={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},s={1:"一",2:"二",3:"三",4:"四"};if(/(W+)/.test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length>1?RegExp.$1.length>2?"星期"+o[a]:"周"+o[a]:o[a])),/(Q+)/.test(t)&&(t=t.replace(RegExp.$1,4==RegExp.$1.length?"第"+s[i]+"季度":s[i])),/(Z+)/.test(t)){let a=this.getWeek(e);t=t.replace(RegExp.$1,3==RegExp.$1.length?"第"+a+"周":a+"")}for(let n in l){let e=new RegExp("("+n+")").exec(t);e&&(t=t.replace(e[1],1==RegExp.$1.length?l[n]:l[n].padStart(RegExp.$1.length,"0")))}return t}getCurrentDate(){return this.formatDate(new Date,"YYYY-mm-dd")}getCurrentTime(){return this.formatDate(new Date,"HH:MM")}addDays(e){let t=new Date;return t.setMilliseconds(t.getMilliseconds()+24*e*60*60*1e3),this.formatDate(t,"YYYY-mm-dd")}getCurrentDateTime(){return this.formatDate(new Date,"YYYY-mm-dd HH:MM:SS")}rand(e,t){return Math.floor(Math.random()*(t-e+1)+e)}randString(e){let t="",a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(e=e||1;e--;)t+=a.charAt(this.rand(0,a.length-1));return t}randFilename(e){return this.randString(this.rand(10,100))+Date.parse(new Date)+"."+this.getFilenameExt(e)}isString(e){return"string"==typeof e}isFunction(e){return"function"===this.type(e)}changeRowToForm(e,t){for(let a in t)if(e[a]){if(t[a]&&this.isArray(t[a]))if(e[a]&&"string"==typeof e[a])e[a]=JSON.parse(e[a]);else{if(this.isObject(e[a]))continue;e[a]=[]}}else e[a]=t[a];return e}isArray(e){return Array.isArray(e)}isObject(e){return null!==e&&"object"==typeof e}isNumber(e){return"number"==typeof e}isDate(e){return"[object Date]"===this.type(e)}isRegExp(e){return"[object RegExp]"===this.type(e)}isFile(e){return"[object File]"===this.type(e)}isFormData(e){return"[object FormData]"===this.type(e)}isBlob(e){return"[object Blob]"===this.type(e)}isBoolean(e){return"boolean"==typeof e}isPromiseLike(e){return e&&this.isFunction(e.then)}isTypedArray(e){return e&&this.isNumber(e.length)&&/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/.test(this.type(e))}isArrayBuffer(e){return"[object ArrayBuffer]"===this.type(e)}isDefined(e){return void 0!==e}isUndefined(e){return void 0===e}isNull(e){return null===e}isFinite(e){return"number"==typeof e&&isFinite(e)}isNaN(e){return this.isNumber(e)&&e!=+e}isError(e){return"[object Error]"===this.type(e)}trim(e){return this.isString(e)?e.trim():e}escapeForRegexp(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}makeMap(e){let t={},a=e.split(",");for(let i=0;i<a.length;i++)t[a[i]]=!0;return t}includes(e,t){return-1!=Array.prototype.indexOf.call(e,t)}arrayRemove(e,t){let a=e.indexOf(t);return a>=0&&e.splice(a,1),a}addDateMinutes(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t||0),e}toJson(e,t){if(!this.isUndefined(e))return this.isNumber(t)||(t=t?2:null),JSON.stringify(e,null,t)}fromJson(e){return this.isString(e)?JSON.parse(decodeURIComponent(e).replace(new RegExp("&quot;","gm"),'"')):e}extend(){let e,t,a,i,l,o,s=arguments[0]||{},n=1,r=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[n]||{},n++),"object"==typeof s||this.isFunction(s)||(s={}),n===r&&(s=this,n--);n<r;n++)if(null!=(l=arguments[n]))for(i in l)e=s[i],a=l[i],s!==a&&(c&&a&&(this.isPlainObject(a)||(t=this.isArray(a)))?(t?(t=!1,o=e&&this.isArray(e)?e:[]):o=e&&this.isPlainObject(e)?e:{},s[i]=this.extend(c,o,a)):void 0!==a&&(s[i]=a));return s}isPlainObject(e){let t,a,i=Object.getPrototypeOf,l={}.hasOwnProperty,o=l.toString,s=o.call(Object);return!(!e||"[object Object]"!==this.type(e))&&(t=i(e),!t||(a=l.call(t,"constructor")&&t.constructor,"function"==typeof a&&o.call(a)===s))}isEmptyObject(e){for(let t in e)return!1;return!0}type(e){const t=Object.prototype.toString;return null==e?e+"":"object"==typeof e||"function"==typeof e?t.call(e)||"object":typeof e}merge(...e){return Object.assign(...e)}clone(e){if("object"!=typeof e||!e)return e;let t={};for(let a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}getUrlParams(e){var t,a,i,l={},o=e.indexOf("?"),s=e.indexOf("#"),n=e.substr(o+1);if(-1===s&&(s=e.length),n)for(i=(t=n.split("&")).length;i--;)l[(a=t[i].split("="))[0]]=decodeURIComponent(a[1]).replace(/\+/g," ");return l}getUrlParam(e,t){return this.getUrlParams(e)[t]}omit(e,t){let a=this.clone(e);return t.forEach((e=>{delete a[e]})),a}pluck(e,t){return"object"!=typeof e||0===e.length?[]:t?e.map((e=>e[t])):e}serializeValue(e){return this.isObject(e)?this.isDate(e)?e.toISOString():this.toJson(e):e}encodeUriQuery(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}paramSerializer(e){if(!e)return"";let t=this,a=[];for(let i in e){const l=e[i];null===l||t.isUndefined(l)||(t.isArray(l)?l.forEach((function(e){a.push(t.encodeUriQuery(i)+"="+t.encodeUriQuery(t.serializeValue(e)))})):a.push(t.encodeUriQuery(i)+"="+t.encodeUriQuery(t.serializeValue(l))))}return a.join("&")}buildUrl(e,t){const a=this.paramSerializer(t);return a&&a.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+a),e}guid(e=32,t=!0,a=null){let i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(a=a||i.length,e)for(let o=0;o<e;o++)l[o]=i[0|Math.random()*a];else{let e;l[8]=l[13]=l[18]=l[23]="-",l[14]="4";for(let t=0;t<36;t++)l[t]||(e=0|16*Math.random(),l[t]=i[19==t?3&e|8:e])}return t?(l.shift(),"u"+l.join("")):l.join("")}getRect(e,t,a){return new Promise((i=>{uni.createSelectorQuery().in(a)[t?"selectAll":"select"](e).boundingClientRect((e=>{t&&Array.isArray(e)&&e.length&&i(e),!t&&e&&i(e)})).exec()}))}renderUrl(e,t){return e&&""!=e||(e=t),e.indexOf("__weui-popup")>0||e.startsWith("tel:")||e.startsWith("http://")||e.startsWith("https://")||0!=e.indexOf("/pages/"+e)&&(e="/pages/"+e),e}renderImage(e){return e?-1!==e.indexOf("http")?e:e=`${this.$$fileBasePath}${e}`:""}makePhoneCall(e){let t="";e.currentTarget?t=e.currentTarget.dataset.phone:t=this.isObject(e)&&e.phone?e.phone:e;-1!==t.indexOf("tel:")&&(t=t.substr(4)),uni.makePhoneCall({phoneNumber:t})}backpage(e=1){uni.navigateBack({delta:e||1})}navigateTo(e,t){if(e.startsWith("tel:"))this.makePhoneCall(e);else{if(e.startsWith("http://")||e.startsWith("https://")){const e=this.buildUrl("/pages/webview",t);return new Promise(((t,a)=>{uni.navigateTo({url:e,success:e=>t(e),fail:e=>a(e)})}))}if(e.startsWith("pages/")&&(e="/"+e),e.startsWith("/pages/")||(e="/pages/"+e),!getApp())return uni.reLaunch({url:e}),void uni.hideHomeButton();if(getApp().globalData&&getApp().globalData.tabBar&&-1!=getApp().globalData.tabBar.indexOf(e)||t.tabbar)uni.switchTab({url:e});else if(t&&(t.redirect||t.reLaunch)){delete t.url;const a=this.buildUrl(e,t);t.redirect?uni.redirectTo({url:a,success:e=>{uni.hideHomeButton&&uni.hideHomeButton()},fail:e=>{l("log","at common/Tools.js:862","error"+e)}}):uni.reLaunch({url:a,success:e=>{uni.hideHomeButton&&uni.hideHomeButton()},fail:e=>{l("log","at common/Tools.js:874","error"+e)}})}else{delete t.url;const a=this.buildUrl(e,t);uni.navigateTo({url:a,success:e=>{},fail:e=>{l("log","at common/Tools.js:886","error"+e),e&&e.errMsg&&e.errMsg.indexOf("limit")>0&&uni.redirectTo({url:a,success:e=>{},fail:e=>{l("log","at common/Tools.js:893","error"+e)}})}})}}}padZero(e,t=2){let a=`${e}`;for(;a.length<t;)a=`0${a}`;return a}parseTimeData(e){const t=1e3,a=6e4,i=36e5,l=24*i;return{days:Math.floor(e/l),hours:Math.floor(e%l/i),minutes:Math.floor(e%i/a),seconds:Math.floor(e%a/t),milliseconds:Math.floor(e%t)}}parseFormat(e,t){let{days:a,hours:i,minutes:l,seconds:o,milliseconds:s}=t;return-1===e.indexOf("DD")?i+=24*a:e=e.replace("DD",this.padZero(a)),-1===e.indexOf("HH")?l+=60*i:e=e.replace("HH",this.padZero(i)),-1===e.indexOf("mm")?o+=60*l:e=e.replace("mm",this.padZero(l)),-1===e.indexOf("ss")?s+=1e3*o:e=e.replace("ss",this.padZero(o)),e.replace("SSS",this.padZero(s,3))}isSameSecond(e,t){return Math.floor(e/1e3)===Math.floor(t/1e3)}addUnit(e="auto",t="rpx"){return this.isNumber(e)?`${e}${t}`:e}getParent(e,t){for(;e;){if(!e.$options||e.$options.name===t)return e;{e=e.$parent;let a=this.getParent(e,t);if(a)return a}}return!1}os(){return uni.getSystemInfoSync().platform}sys(){return uni.getSystemInfoSync()}}var he="session_com_",ge="user_session",fe="redirect_session",ye={getRedirecturl:()=>uni.getStorageSync(he+pe+"_"+fe)||null,setRedirecturl(e){null==e?uni.removeStorageSync(he+pe+"_"+fe):uni.setStorageSync(he+pe+"_"+fe,e)},getUser:()=>uni.getStorageSync(he+pe+ge)||null,setUser(e){let t=this.getUser();t||(t={}),t=Object.assign(t,e),uni.setStorageSync(he+pe+ge,e)},setUserValue(e,t){let a=this.getUser();a||(a={}),a[e]=t,uni.setStorageSync(he+pe+ge,a)},getUserValue(e){let t=this.getUser();return t||(t={}),t[e]||null},clearUser(){uni.removeStorageSync(ge+pe);uni.getStorageInfoSync().keys.forEach((e=>{e.startsWith(he+pe)&&uni.removeStorageSync(e)}))},getToken(){var e=this.getUser();return e?e.token:null},getOpenId(){var e=this.getUser();return e?e.openid:null},setValue(e,t){null==t?uni.removeStorageSync(he+pe+e):uni.setStorageSync(he+pe+e,t)},getValue:e=>uni.getStorageSync(he+pe+e)||null};class we extends class{constructor(){Object.assign(this,{$$basePath:de}),this.__init()}__init(){this.__initDefaults(),this.__initMethods()}__initInterceptor(){}__initDefaults(){this.suffix="",this.instanceSource={method:["OPTIONS","GET","HEAD","POST","PUT","PATCH","DELETE","TRACE","CONNECT"]}}__initMethods(){for(let e in this.instanceSource)this.instanceSource[e].forEach(((e,t)=>{this[e.toLowerCase()+this.suffix]=(...t)=>this.__defaultRequest(e,...t)}))}__defaultRequest(e="",t="",a={},i={},l="json"){const o=Object.assign({},this.setHeaders(),i),s=this.setUrl(t,a);a.url&&(a.url=this.setUrl(a.url,a));const n=(e,t)=>{for(let a=0,i=t.length;a<i;){let i=t[a++],l=t[a++];e=e.then(i,l)}return e},r={url:s,data:a,header:o,method:e,dataType:l};let c=[],d=[],u=this.setInterceptors(),p=this.__resolve(r);return u.forEach(((e,t)=>{(e.request||e.requestError)&&c.push(e.request,e.requestError),(e.response||e.responseError)&&d.unshift(e.response,e.responseError)})),p=n(p,c),p=p.then(this.__http),p=n(p,d),p=p.then((e=>e.data),(e=>e)),p}__http(e){return new Promise(((t,a)=>{e.success=e=>t(e),e.fail=e=>a(e),uni.request(e)}))}__resolve(e){return new Promise(((t,a)=>{t(e)}))}__reject(e){return new Promise(((t,a)=>{a(e)}))}getPathValue(e,t){for(var a=t.split(".");a.length;)e=e[a.shift()];return e}getRestUrl(e,t){return t&&null!==t&&"object"==typeof t?e=(e=e.replace(/\{\{(.+?)\}\}/g,((e,a)=>{let i=a.trim();return this.getPathValue(t,i)}))).replace(/\{(.+?)\}/g,((e,a)=>{let i=a.trim();return this.getPathValue(t,i)})):e}setUrl(e,t){let a=/^http(s)?:\/\/.*/i.test(e);if(e=this.getRestUrl(e,t),a)return e;let i=this.$$basePath,l=uni.getStorageSync("basePath");return l&&(i=l),e.startsWith("/")||e.endsWith("/")?`${i}${this.$$prefix}${e}`:`${i}/${this.$$prefix}${e}`}setHeaders(){return{"Content-Type":"application/x-www-form-urlencoded"}}setInterceptors(){return this.interceptors=[{request:e=>(e.header=e.header||{},e.requestTimestamp=(new Date).getTime(),ye.getToken()&&(e.header.Authorization=ye.getToken()),uni.showNavigationBarLoading(),e.data.redirecturl&&(ye.setRedirecturl(e.data.redirecturl),delete e.data.redirecturl),delete e.data.loadmsg,e),requestError:e=>(uni.hideToast(),e),response:e=>{if(e)return e.responseTimestamp=(new Date).getTime(),uni.hideNavigationBarLoading(),401!=e.data.code&&401!=e.data.status||(ye.clearUser(),uni.reLaunch({url:getApp().globalData.homePage})),e},responseError:e=>(uni.hideNavigationBarLoading(),e)}],this.__initInterceptor(),this.interceptors}}{constructor(){super(),this.$$prefix=""}__initInterceptor(){}postData(e,t){return this.post(t||this.$$path.data,e)}getData(e,t){return this.get(t||this.$$path.data,e)}saveData(e,t){return this.post(t||this.$$path.save,e)}delData(e,t){return this.post(t||this.$$path.del,e)}}const be={data:()=>({}),onLoad(){this.$u.getRect=this.$uGetRect},created(){this.$u.getRect=this.$uGetRect},computed:{$u:()=>uni.$u.deepMerge(uni.$u,{props:void 0,http:void 0,mixin:void 0}),bem:()=>function(e,t,a){const i=`u-${e}--`,l={};return t&&t.map((e=>{l[i+this[e]]=!0})),a&&a.map((e=>{this[e]?l[i+e]=this[e]:delete l[i+e]})),Object.keys(l)}},methods:{openPage(e="url"){const t=this[e];t&&uni[this.linkType]({url:t})},$uGetRect(e,t){return new Promise((a=>{uni.createSelectorQuery().in(this)[t?"selectAll":"select"](e).boundingClientRect((e=>{t&&Array.isArray(e)&&e.length&&a(e),!t&&e&&a(e)})).exec()}))},getParentData(e=""){this.parent||(this.parent={}),this.parent=this.$u.$parent.call(this,e),this.parent.children&&-1===this.parent.children.indexOf(this)&&this.parent.children.push(this),this.parent&&this.parentData&&(Object.keys(this.parentData).map((e=>{this.parentData[e]=this.parent[e]})),this.parentData.value=this.parent.modelValue)},preventEvent(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()},noop(e){this.preventEvent(e)}},onReachBottom(){uni.$emit("uOnReachBottom")},beforeUnmount(){if(this.parent&&uni.$u.test.array(this.parent.children)){const e=this.parent.children;e.map(((t,a)=>{t===this&&e.splice(a,1)}))}}};function ve(e){if([null,void 0,NaN,!1].includes(e))return e;if("object"!=typeof e&&"function"!=typeof e)return e;var t,a=(t=e,"[object Array]"===Object.prototype.toString.call(t)?[]:{});for(let i in e)e.hasOwnProperty(i)&&(a[i]="object"==typeof e[i]?ve(e[i]):e[i]);return a}function xe(e={},t={}){if("object"!=typeof(e=ve(e))||"object"!=typeof t)return!1;for(var a in t)t.hasOwnProperty(a)&&(a in e?"object"!=typeof e[a]||"object"!=typeof t[a]?e[a]=t[a]:e[a].concat&&t[a].concat?e[a]=e[a].concat(t[a]):e[a]=xe(e[a],t[a]):e[a]=t[a]);return e}function ke(e){switch(typeof e){case"undefined":return!0;case"string":if(0==e.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g,"").length)return!0;break;case"boolean":if(!e)return!0;break;case"number":if(0===e||isNaN(e))return!0;break;case"object":if(null===e||0===e.length)return!0;for(var t in e)return!1;return!0}return!1}function Se(e){return"[object Object]"===Object.prototype.toString.call(e)}function _e(e){return"function"==typeof e}const Ve={email:function(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)},mobile:function(e){return/^1[23456789]\d{9}$/.test(e)},url:function(e){return/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/.test(e)},date:function(e){return!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e){return/^\d+$/.test(e)},idCard:function(e){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},carNo:function(e){const t=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/,a=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;return 7===e.length?a.test(e):8===e.length&&t.test(e)},amount:function(e){return/^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(e)},chinese:function(e){return/^[\u4e00-\u9fa5]+$/gi.test(e)},letter:function(e){return/^[a-zA-Z]*$/.test(e)},enOrNum:function(e){return/^[0-9a-zA-Z]*$/g.test(e)},contains:function(e,t){return e.indexOf(t)>=0},range:function(e,t){return e>=t[0]&&e<=t[1]},rangeLength:function(e,t){return e.length>=t[0]&&e.length<=t[1]},empty:ke,isEmpty:ke,jsonString:function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(a){return!1}return!1},landline:function(e){return/^\d{3,4}-\d{7,8}(-\d{3,4})?$/.test(e)},object:Se,array:function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},code:function(e,t=6){return new RegExp(`^\\d{${t}}$`).test(e)},image:function(e){const t=e.split("?")[0];return/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i.test(t)},video:function(e){return/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8)/i.test(e)},func:_e,promise:function(e){return Se(e)&&_e(e.then)&&_e(e.catch)}};const Ce=new class{setConfig(e){this.config=xe(this.config,e)}request(e={}){if(this.interceptor.request&&"function"==typeof this.interceptor.request){let t=this.interceptor.request(e);if(!1===t)return new Promise((()=>{}));this.options=t}return e.dataType=e.dataType||this.config.dataType,e.responseType=e.responseType||this.config.responseType,e.url=e.url||"",e.params=e.params||{},e.header=Object.assign({},this.config.header,e.header),e.method=e.method||this.config.method,new Promise(((t,a)=>{e.complete=e=>{if(uni.hideLoading(),clearTimeout(this.config.timer),this.config.timer=null,this.config.originalData)if(this.interceptor.response&&"function"==typeof this.interceptor.response){let i=this.interceptor.response(e);!1!==i?t(i):a(e)}else t(e);else if(200==e.statusCode)if(this.interceptor.response&&"function"==typeof this.interceptor.response){let i=this.interceptor.response(e.data);!1!==i?t(i):a(e.data)}else t(e.data);else a(e)},e.url=Ve.url(e.url)?e.url:this.config.baseUrl+(0==e.url.indexOf("/")?e.url:"/"+e.url),this.config.showLoading&&!this.config.timer&&(this.config.timer=setTimeout((()=>{uni.showLoading({title:this.config.loadingText,mask:this.config.loadingMask}),this.config.timer=null}),this.config.loadingTime)),uni.request(e)}))}constructor(){this.config={baseUrl:"",header:{},method:"POST",dataType:"json",responseType:"text",showLoading:!0,loadingText:"请求中...",loadingTime:800,timer:null,originalData:!1,loadingMask:!0},this.interceptor={request:null,response:null},this.get=(e,t={},a={})=>this.request({method:"GET",url:e,header:a,data:t}),this.post=(e,t={},a={})=>this.request({url:e,method:"POST",header:a,data:t}),this.put=(e,t={},a={})=>this.request({url:e,method:"PUT",header:a,data:t}),this.delete=(e,t={},a={})=>this.request({url:e,method:"DELETE",header:a,data:t})}};const Ne=(new class{constructor(){this.config={type:"navigateTo",url:"",delta:1,params:{},animationType:"pop-in",animationDuration:300,intercept:!1},this.route=this.route.bind(this)}addRootPath(e){return"/"===e[0]?e:`/${e}`}mixinParam(e,t){e=e&&this.addRootPath(e);let a="";return/.*\/.*\?.*=.*/.test(e)?(a=uni.$u.queryParams(t,!1),e+"&"+a):(a=uni.$u.queryParams(t),e+a)}async route(e={},t={}){let a={};if("string"==typeof e?(a.url=this.mixinParam(e,t),a.type="navigateTo"):(a=uni.$u.deepClone(e,this.config),a.url=this.mixinParam(e.url,e.params)),t.intercept&&(this.config.intercept=t.intercept),a.params=t,a=uni.$u.deepMerge(this.config,a),"function"==typeof uni.$u.routeIntercept){await new Promise(((e,t)=>{uni.$u.routeIntercept(a,e)}))&&this.openPage(a)}else this.openPage(a)}openPage(e){const{url:t,type:a,delta:i,animationType:l,animationDuration:o}=e;"navigateTo"!=e.type&&"to"!=e.type||uni.navigateTo({url:t,animationType:l,animationDuration:o}),"redirectTo"!=e.type&&"redirect"!=e.type||uni.redirectTo({url:t}),"switchTab"!=e.type&&"tab"!=e.type||uni.switchTab({url:t}),"reLaunch"!=e.type&&"launch"!=e.type||uni.reLaunch({url:t}),"navigateBack"!=e.type&&"back"!=e.type||uni.navigateBack({delta:i})}}).route;function Ee(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10==e.toString().length&&(e*=1e3);let a,i=new Date(e),l={"y+":i.getFullYear().toString(),"m+":(i.getMonth()+1).toString(),"d+":i.getDate().toString(),"h+":i.getHours().toString(),"M+":i.getMinutes().toString(),"s+":i.getSeconds().toString()};for(let o in l)a=new RegExp("("+o+")").exec(t),a&&(t=t.replace(a[1],1==a[1].length?l[o]:l[o].padStart(a[1].length,"0")));return t}function Be(e,t=!0){if((e=e.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let a=1;a<4;a+=1)t+=e.slice(a,a+1).concat(e.slice(a,a+1));e=t}let a=[];for(let t=1;t<7;t+=2)a.push(parseInt("0x"+e.slice(t,t+2)));return t?`rgb(${a[0]},${a[1]},${a[2]})`:a}if(/^(rgb|RGB)/.test(e)){return e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").map((e=>Number(e)))}return e}function ze(e){let t=e;if(/^(rgb|RGB)/.test(t)){let e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a="#";for(let t=0;t<e.length;t++){let i=Number(e[t]).toString(16);i=1==String(i).length?"0"+i:i,"0"===i&&(i+=i),a+=i}return 7!==a.length&&(a=t),a}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;{let e=t.replace(/#/,"").split("");if(6===e.length)return t;if(3===e.length){let t="#";for(let a=0;a<e.length;a+=1)t+=e[a]+e[a];return t}}}String.prototype.padStart||(String.prototype.padStart=function(e,t=" "){if("[object String]"!==Object.prototype.toString.call(t))throw new TypeError("fillString must be String");let a=this;if(a.length>=e)return String(a);let i=e-a.length,l=Math.ceil(i/t.length);for(;l>>=1;)t+=t,1===l&&(t+=t);return t.slice(0,i)+a});const $e={colorGradient:function(e="rgb(0, 0, 0)",t="rgb(255, 255, 255)",a=10){let i=Be(e,!1),l=i[0],o=i[1],s=i[2],n=Be(t,!1),r=(n[0]-l)/a,c=(n[1]-o)/a,d=(n[2]-s)/a,u=[];for(let p=0;p<a;p++){let e=ze("rgb("+Math.round(r*p+l)+","+Math.round(c*p+o)+","+Math.round(d*p+s)+")");u.push(e)}return u},hexToRgb:Be,rgbToHex:ze,colorToRgba:function(e,t=.3){let a=(e=ze(e)).toLowerCase();if(a&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a)){if(4===a.length){var i="#";for(let e=1;e<4;e+=1)i+=a.slice(e,e+1).concat(a.slice(e,e+1));a=i}var l=[];for(let e=1;e<7;e+=2)l.push(parseInt("0x"+a.slice(e,e+2)));return"rgba("+l.join(",")+","+t+")"}return a}};function De(e,t="both"){return"both"==t?e.replace(/^\s+|\s+$/g,""):"left"==t?e.replace(/^\s*/,""):"right"==t?e.replace(/(\s*$)/g,""):"all"==t?e.replace(/\s+/g,""):e}let Te=null;let Ae=[],Ie=[];let Pe="1.10.1";const je={v:Pe,version:Pe,type:["primary","success","info","error","warning"]};const Oe={queryParams:function(e={},t=!0,a="brackets"){let i=t?"?":"",l=[];-1==["indices","brackets","repeat","comma"].indexOf(a)&&(a="brackets");for(let o in e){let t=e[o];if(!(["",void 0,null].indexOf(t)>=0))if(t.constructor===Array)switch(a){case"indices":for(let a=0;a<t.length;a++)l.push(o+"["+a+"]="+t[a]);break;case"brackets":default:t.forEach((e=>{l.push(o+"[]="+e)}));break;case"repeat":t.forEach((e=>{l.push(o+"="+e)}));break;case"comma":let e="";t.forEach((t=>{e+=(e?",":"")+t})),l.push(o+"="+e)}else l.push(o+"="+t)}return l.length?i+l.join("&"):""},route:Ne,timeFormat:Ee,date:Ee,timeFrom:function(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10==e.toString().length&&(e*=1e3);let a=+new Date(Number(e)),i=(Number(new Date)-a)/1e3,l="";switch(!0){case i<300:l="刚刚";break;case i>=300&&i<3600:l=parseInt(i/60)+"分钟前";break;case i>=3600&&i<86400:l=parseInt(i/3600)+"小时前";break;case i>=86400&&i<2592e3:l=parseInt(i/86400)+"天前";break;default:l=!1===t?i>=2592e3&&i<31536e3?parseInt(i/2592e3)+"个月前":parseInt(i/31536e3)+"年前":Ee(a,t)}return l},colorGradient:$e.colorGradient,colorToRgba:$e.colorToRgba,guid:function(e=32,t=!0,a=null){let i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(a=a||i.length,e)for(let o=0;o<e;o++)l[o]=i[0|Math.random()*a];else{let e;l[8]=l[13]=l[18]=l[23]="-",l[14]="4";for(let t=0;t<36;t++)l[t]||(e=0|16*Math.random(),l[t]=i[19==t?3&e|8:e])}return t?(l.shift(),"u"+l.join("")):l.join("")},color:{primary:"#19be6b",primaryDark:"#18b566",primaryDisabled:"#71d5a1",primaryLight:"#dbf1e1",bgColor:"#f3f4f6",info:"#909399",infoDark:"#82848a",infoDisabled:"#c8c9cc",infoLight:"#f4f4f5",warning:"#ff9900",warningDark:"#f29100",warningDisabled:"#fcbd71",warningLight:"#fdf6ec",error:"#fa3534",errorDark:"#dd6161",errorDisabled:"#fab6b6",errorLight:"#fef0f0",success:"#19be6b",successDark:"#18b566",successDisabled:"#71d5a1",successLight:"#dbf1e1",mainColor:"#303133",contentColor:"#606266",tipsColor:"#909399",lightColor:"#c0c4cc",borderColor:"#e4e7ed"},sys:function(){return uni.getSystemInfoSync()},os:function(){return uni.getSystemInfoSync().platform},type2icon:function(e="success",t=!1){-1==["primary","info","error","warning","success"].indexOf(e)&&(e="success");let a="";switch(e){case"primary":case"info":a="info-circle";break;case"error":a="close-circle";break;case"warning":a="error-circle";break;default:a="checkmark-circle"}return t&&(a+="-fill"),a},randomArray:function(e=[]){return e.sort((()=>Math.random()-.5))},wranning:function(e){},get:Ce.get,post:Ce.post,put:Ce.put,delete:Ce.delete,hexToRgb:$e.hexToRgb,rgbToHex:$e.rgbToHex,test:Ve,random:function(e,t){if(e>=0&&t>0&&t>=e){let a=t-e+1;return Math.floor(Math.random()*a+e)}return 0},deepClone:ve,deepMerge:xe,getParent:function(e,t){let a=this.$parent;for(;a;){if(a.$options.name===e){let e={};if(Array.isArray(t))t.map((t=>{e[t]=a[t]?a[t]:""}));else for(let i in t)Array.isArray(t[i])?t[i].length?e[i]=t[i]:e[i]=a[i]:t[i].constructor===Object?Object.keys(t[i]).length?e[i]=t[i]:e[i]=a[i]:e[i]=t[i]||!1===t[i]?t[i]:a[i];return e}a=a.$parent}return{}},$parent:function(e){let t=this.$parent;for(;t;){if(!t.$options||t.$options.name===e)return t;t=t.$parent}return!1},addUnit:function(e="auto",t="rpx"){return e=String(e),Ve.number(e)?`${e}${t}`:e},trim:De,addStyle:function(e,t="object"){if(Ve.empty(e)||"object"==typeof e&&"object"===t||"string"===t&&"string"==typeof e)return e;if("object"===t){const t=(e=De(e)).split(";"),a={};for(let e=0;e<t.length;e++)if(t[e]){const i=t[e].split(":");a[De(i[0])]=De(i[1])}return a}let a="";for(const i in e){a+=`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}:${e[i]};`}return De(a)},type:["primary","success","error","warning","info"],http:Ce,toast:function(e,t=1500){uni.showToast({title:e,icon:"none",duration:t})},config:je,zIndex:{toast:1000090,noNetwork:1000080,popup:1000075,mask:1000070,navbar:1000020,topTips:1000015,sticky:1000010,indexListSticky:1000005},debounce:function(e,t=500,a=!1){if(null!==Te&&clearTimeout(Te),a){var i=!Te;Te=setTimeout((function(){Te=null}),t),i&&"function"==typeof e&&e()}else Te=setTimeout((function(){"function"==typeof e&&e()}),t)},throttle:function(e,t=500,a=!0,i="default"){Ae[i]||(Ae[i]=null),a?Ie[i]||(Ie[i]=!0,"function"==typeof e&&e(),Ae[i]=setTimeout((()=>{Ie[i]=!1}),t)):Ie[i]||(Ie[i]=!0,Ae[i]=setTimeout((()=>{Ie[i]=!1,"function"==typeof e&&e()}),t))}};uni.$u=Oe;const Me={install:e=>{e.mixin(be),e.config.globalProperties.$u=Oe}};function Fe(e){const t=ye.getUser()&&ye.getUser().role;if(t&&"admin"==t)return!0;const a=ye.getUser()&&ye.getUser().permissions;return!!(a&&a.length>0)&&a.some((t=>"*:*:*"===t||t===e))}function Ue(e){const t=ye.getUser()&&ye.getUser().roles;return!!(t&&t.length>0)&&t.some((t=>"admin"===t||t===e))}const Le={auth:e=>Fe(e),authOr:e=>e.some((e=>Fe(e))),authAnd:e=>e.every((e=>Fe(e))),role:e=>Ue(e),roleOr:e=>e.some((e=>Ue(e))),roleAnd:e=>e.every((e=>Ue(e)))};const{app:Re,Vuex:qe,Pinia:He}=function(){const t=e.createVueApp(Y);return t.config.globalProperties.$tools=new me,t.config.globalProperties.$http=new we,t.config.globalProperties.$session=ye,t.config.globalProperties.$auth=Le,uni.getSystemInfo({success:function(e){t.config.globalProperties.StatusBar=e.statusBarHeight,"android"==e.platform?t.config.globalProperties.CustomBar=e.statusBarHeight+50:t.config.globalProperties.CustomBar=e.statusBarHeight+45}}),t.mixin({methods:{setCurrentPage:ce,Validate:X,setData:K,navigateTo:te,showModal:ae,showToast:ie,getPickerChildren:le,uploadImage:se,getOption:re,setAuthorize:ne}}),t.use(Me),{app:t}}();uni.Vuex=qe,uni.Pinia=He,Re.provide("__globalStyles",__uniConfig.styles),Re._component.mpType="app",Re._component.render=()=>{},Re.mount("#app")}(Vue,uni.VueShared);
